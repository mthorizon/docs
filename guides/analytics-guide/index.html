<!doctype html>
<html lang="en" class="dark">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="/initializeTheme.iife.js"></script>
    
    <title data-react-helmet="true">Sequence Analytics API in Dune</title>
    <meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" property="og:title" content="Sequence Analytics API in Dune"/><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"/>
    <link data-react-helmet="true" rel="icon" href="/img/favicon.ico" type="image/x-icon"/><link data-react-helmet="true" rel="icon" href="/img/favicon.ico" type="image/x-icon" media="(prefers-color-scheme: dark)"/>
    
    
    
  
    <script type="module" crossorigin src="/assets/index-B2rCT-Yh.js"></script>
    <link rel="stylesheet" crossorigin href="/assets/style-D1uZTXYt.css">
  </head>
  <body>
    <div id="app"><div class="vocs_DocsLayout" data-layout="docs"><a class="vocs_SkipLink vocs_utils_visuallyHidden" href="/guides/analytics-guide#vocs-content">Skip to content</a><div class="vocs_DocsLayout_gutterLeft"><aside class="vocs_Sidebar vocs_DocsLayout_sidebar"><div class="vocs_Sidebar_logoWrapper"><div class="vocs_Sidebar_logo"><a style="align-items:center;display:flex;height:100%" href="/"><img alt="Logo" class="vocs_NavLogo_logoImage vocs_Logo vocs_Logo_logoDark" src="/img/sequence-composite-dark.svg"/><img alt="Logo" class="vocs_NavLogo_logoImage vocs_Logo vocs_Logo_logoLight" src="/img/sequence-composite-light.svg"/></a></div><div class="vocs_Sidebar_divider"></div></div><nav class="vocs_Sidebar_navigation"><div class="vocs_Sidebar_group"><section class="vocs_Sidebar_section vocs_Sidebar_level"><div class="vocs_Sidebar_sectionHeader" role="button" tabindex="0"><div class="vocs_Sidebar_sectionTitle">Guides</div><div role="button" tabindex="0"><div aria-label="toggle section" class="vocs_Icon vocs_Sidebar_sectionCollapse" role="img" style="--vocs_Icon_size:10px"><svg width="100%" height="100%" viewBox="0 0 39 69" fill="none" xmlns="http://www.w3.org/2000/svg"><title>Chevron Right</title><path d="M38.8697 34.7461C38.8697 33.6719 38.4791 32.6953 37.649 31.8652L7.47318 1.8848C6.74078 1.1035 5.76418 0.712891 4.64118 0.712891C2.34618 0.712891 0.588379 2.42189 0.588379 4.71679C0.588379 5.79099 1.07668 6.81639 1.76028 7.59769L29.0552 34.7461L1.76028 61.8945C1.07668 62.6758 0.588379 63.6523 0.588379 64.7754C0.588379 67.0703 2.34618 68.7793 4.64118 68.7793C5.76418 68.7793 6.74078 68.3887 7.47318 67.6074L37.649 37.627C38.4791 36.7969 38.8697 35.8203 38.8697 34.7461Z" fill="currentColor"></path></svg></div></div></div><div class="vocs_Sidebar_items"><a data-active="false" class="vocs_Sidebar_item" href="/guides/webgl-guide">Build a Game with WebGL</a><a data-active="false" class="vocs_Sidebar_item" href="/guides/unity-guide">Build a Unity Game</a><a data-active="false" class="vocs_Sidebar_item" href="/guides/mint-collectibles-serverless">Build a Collectible Minting Service</a><a data-active="false" class="vocs_Sidebar_item" href="/guides/metadata-guide">Manage Collection Metadata</a><a data-active="false" class="vocs_Sidebar_item" href="/guides/treasure-chest-guide">Build a Treasure Chest with AI Minting</a><a data-active="false" class="vocs_Sidebar_item" href="/guides/building-relaying-server">Build a Backend Transaction Service</a><a data-active="true" class="vocs_Sidebar_item" href="/guides/analytics-guide">Leverage Sequence Analytics API in Dune</a><a data-active="false" class="vocs_Sidebar_item" href="/guides/custom-marketplace">Build a Custom Marketplace</a></div></section><section class="vocs_Sidebar_section"><div class="vocs_Sidebar_items"><a data-active="false" class="vocs_Sidebar_item" href="/guides/template-overview">Templates</a></div></section></div></nav></aside></div><div class="vocs_DocsLayout_gutterTop vocs_DocsLayout_gutterTop_offsetLeftGutter"><div class="vocs_DesktopTopNav"><button class="vocs_DesktopSearch_search" type="button" aria-haspopup="dialog" aria-expanded="false" aria-controls="radix-:Rlj:" data-state="closed"><svg width="15" height="15" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg" style="margin-top:2px"><path d="M10 6.5C10 8.433 8.433 10 6.5 10C4.567 10 3 8.433 3 6.5C3 4.567 4.567 3 6.5 3C8.433 3 10 4.567 10 6.5ZM9.30884 10.0159C8.53901 10.6318 7.56251 11 6.5 11C4.01472 11 2 8.98528 2 6.5C2 4.01472 4.01472 2 6.5 2C8.98528 2 11 4.01472 11 6.5C11 7.56251 10.6318 8.53901 10.0159 9.30884L12.8536 12.1464C13.0488 12.3417 13.0488 12.6583 12.8536 12.8536C12.6583 13.0488 12.3417 13.0488 12.1464 12.8536L9.30884 10.0159Z" fill="currentColor" fill-rule="evenodd" clip-rule="evenodd"></path></svg>Search<div class="vocs_DesktopSearch_searchCommand"><div style="background:currentColor;transform:rotate(45deg);width:1.5px;border-radius:2px;height:100%"></div></div></button><div class="vocs_DesktopTopNav_logoWrapper"><div class="vocs_DesktopTopNav_logo"><a style="align-items:center;display:flex;height:56px;margin-top:4px" href="/"><img alt="Logo" class="vocs_NavLogo_logoImage vocs_Logo vocs_Logo_logoDark" src="/img/sequence-composite-dark.svg"/><img alt="Logo" class="vocs_NavLogo_logoImage vocs_Logo vocs_Logo_logoLight" src="/img/sequence-composite-light.svg"/></a></div></div><div class="vocs_DesktopTopNav_section"></div><div class="vocs_DesktopTopNav_section"><div class="vocs_DesktopTopNav_group"><nav aria-label="Main" data-orientation="horizontal" dir="ltr" class="vocs_NavigationMenu"><div style="position:relative"><ul data-orientation="horizontal" class="vocs_NavigationMenu_list" dir="ltr"><li class="vocs_DesktopTopNav_item vocs_NavigationMenu_item"><button id="radix-:Rm5j:-trigger-radix-:R6m5j:" data-state="closed" aria-expanded="false" aria-controls="radix-:Rm5j:-content-radix-:R6m5j:" data-active="false" class="vocs_NavigationMenu_trigger vocs_NavigationMenu_link" style="--vocs_NavigationMenu_chevronDownIcon:url(/.vocs/icons/chevron-down.svg)" data-radix-collection-item="">Solutions</button></li><li class="vocs_DesktopTopNav_item vocs_NavigationMenu_item"><button id="radix-:Rm5j:-trigger-radix-:Ram5j:" data-state="closed" aria-expanded="false" aria-controls="radix-:Rm5j:-content-radix-:Ram5j:" data-active="false" class="vocs_NavigationMenu_trigger vocs_NavigationMenu_link" style="--vocs_NavigationMenu_chevronDownIcon:url(/.vocs/icons/chevron-down.svg)" data-radix-collection-item="">Resources</button></li><li class="vocs_DesktopTopNav_item vocs_NavigationMenu_item"><button id="radix-:Rm5j:-trigger-radix-:Rem5j:" data-state="closed" aria-expanded="false" aria-controls="radix-:Rm5j:-content-radix-:Rem5j:" data-active="false" class="vocs_NavigationMenu_trigger vocs_NavigationMenu_link" style="--vocs_NavigationMenu_chevronDownIcon:url(/.vocs/icons/chevron-down.svg)" data-radix-collection-item="">SDKs</button></li><li class="vocs_DesktopTopNav_item vocs_NavigationMenu_item"><button id="radix-:Rm5j:-trigger-radix-:Rim5j:" data-state="closed" aria-expanded="false" aria-controls="radix-:Rm5j:-content-radix-:Rim5j:" data-active="false" class="vocs_NavigationMenu_trigger vocs_NavigationMenu_link" style="--vocs_NavigationMenu_chevronDownIcon:url(/.vocs/icons/chevron-down.svg)" data-radix-collection-item="">APIs</button></li><li class="vocs_DesktopTopNav_item vocs_NavigationMenu_item"><button id="radix-:Rm5j:-trigger-radix-:Rmm5j:" data-state="closed" aria-expanded="false" aria-controls="radix-:Rm5j:-content-radix-:Rmm5j:" data-active="false" class="vocs_NavigationMenu_trigger vocs_NavigationMenu_link" style="--vocs_NavigationMenu_chevronDownIcon:url(/.vocs/icons/chevron-down.svg)" data-radix-collection-item="">Support</button></li></ul></div></nav></div><div class="vocs_DesktopTopNav_divider vocs_DesktopTopNav_hideCompact"></div></div></div><div class="vocs_MobileTopNav"><div class="vocs_MobileTopNav_section"><div class="vocs_MobileTopNav_group"><div class="vocs_MobileTopNav_logo"><a style="align-items:center;display:flex;height:100%" href="/"><img alt="Logo" class="vocs_NavLogo_logoImage vocs_Logo vocs_Logo_logoDark" src="/img/sequence-composite-dark.svg"/><img alt="Logo" class="vocs_NavLogo_logoImage vocs_Logo vocs_Logo_logoLight" src="/img/sequence-composite-light.svg"/></a></div></div><div class="vocs_MobileTopNav_group"><nav aria-label="Main" data-orientation="horizontal" dir="ltr" class="vocs_MobileTopNav_navigation vocs_NavigationMenu"><div style="position:relative"><ul data-orientation="horizontal" class="vocs_NavigationMenu_list" dir="ltr"><li class="vocs_MobileTopNav_item vocs_NavigationMenu_item"><button id="radix-:Rcpj:-trigger-radix-:R3cpj:" data-state="closed" aria-expanded="false" aria-controls="radix-:Rcpj:-content-radix-:R3cpj:" data-active="false" class="vocs_NavigationMenu_trigger vocs_NavigationMenu_link" style="--vocs_NavigationMenu_chevronDownIcon:url(/.vocs/icons/chevron-down.svg)" data-radix-collection-item="">Solutions</button></li><li class="vocs_MobileTopNav_item vocs_NavigationMenu_item"><button id="radix-:Rcpj:-trigger-radix-:R5cpj:" data-state="closed" aria-expanded="false" aria-controls="radix-:Rcpj:-content-radix-:R5cpj:" data-active="false" class="vocs_NavigationMenu_trigger vocs_NavigationMenu_link" style="--vocs_NavigationMenu_chevronDownIcon:url(/.vocs/icons/chevron-down.svg)" data-radix-collection-item="">Resources</button></li><li class="vocs_MobileTopNav_item vocs_NavigationMenu_item"><button id="radix-:Rcpj:-trigger-radix-:R7cpj:" data-state="closed" aria-expanded="false" aria-controls="radix-:Rcpj:-content-radix-:R7cpj:" data-active="false" class="vocs_NavigationMenu_trigger vocs_NavigationMenu_link" style="--vocs_NavigationMenu_chevronDownIcon:url(/.vocs/icons/chevron-down.svg)" data-radix-collection-item="">SDKs</button></li><li class="vocs_MobileTopNav_item vocs_NavigationMenu_item"><button id="radix-:Rcpj:-trigger-radix-:R9cpj:" data-state="closed" aria-expanded="false" aria-controls="radix-:Rcpj:-content-radix-:R9cpj:" data-active="false" class="vocs_NavigationMenu_trigger vocs_NavigationMenu_link" style="--vocs_NavigationMenu_chevronDownIcon:url(/.vocs/icons/chevron-down.svg)" data-radix-collection-item="">APIs</button></li><li class="vocs_MobileTopNav_item vocs_NavigationMenu_item"><button id="radix-:Rcpj:-trigger-radix-:Rbcpj:" data-state="closed" aria-expanded="false" aria-controls="radix-:Rcpj:-content-radix-:Rbcpj:" data-active="false" class="vocs_NavigationMenu_trigger vocs_NavigationMenu_link" style="--vocs_NavigationMenu_chevronDownIcon:url(/.vocs/icons/chevron-down.svg)" data-radix-collection-item="">Support</button></li></ul></div></nav><div class="vocs_MobileTopNav_navigation vocs_MobileTopNav_navigation_compact"></div></div></div><div class="vocs_MobileTopNav_section"><div class="vocs_MobileTopNav_group" style="margin-right:-8px"><button class="vocs_MobileSearch_searchButton" type="button" aria-label="Search" aria-haspopup="dialog" aria-expanded="false" aria-controls="radix-:R39j:" data-state="closed"><svg width="21" height="21" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M10 6.5C10 8.433 8.433 10 6.5 10C4.567 10 3 8.433 3 6.5C3 4.567 4.567 3 6.5 3C8.433 3 10 4.567 10 6.5ZM9.30884 10.0159C8.53901 10.6318 7.56251 11 6.5 11C4.01472 11 2 8.98528 2 6.5C2 4.01472 4.01472 2 6.5 2C8.98528 2 11 4.01472 11 6.5C11 7.56251 10.6318 8.53901 10.0159 9.30884L12.8536 12.1464C13.0488 12.3417 13.0488 12.6583 12.8536 12.8536C12.6583 13.0488 12.3417 13.0488 12.1464 12.8536L9.30884 10.0159Z" fill="currentColor" fill-rule="evenodd" clip-rule="evenodd"></path></svg></button></div></div></div></div><div class="vocs_DocsLayout_gutterTopCurtain vocs_DocsLayout_gutterTopCurtain_withSidebar"><div class="vocs_DesktopTopNav_curtain"></div><div class="vocs_MobileTopNav_curtain"><div class="vocs_MobileTopNav_curtainGroup"><div class="vocs_MobileTopNav_curtainItem"><button type="button" aria-haspopup="dialog" aria-expanded="false" aria-controls="radix-:Rqj:" data-state="closed" class="vocs_MobileTopNav_menuTrigger"><div aria-label="Menu" class="vocs_Icon" role="img" style="--vocs_Icon_size:13px"><svg width="100%" height="100%" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 79 48" fill="none"><title>Menu</title><path fill="currentColor" d="M19.528 47.232h40.87c1.952 0 3.515-1.562 3.515-3.564a3.5 3.5 0 0 0-3.516-3.516H19.528a3.501 3.501 0 0 0-3.515 3.516c0 2.002 1.562 3.564 3.515 3.564ZM12.057 27.262h55.81a3.501 3.501 0 0 0 3.516-3.516 3.501 3.501 0 0 0-3.515-3.515h-55.81a3.501 3.501 0 0 0-3.516 3.515 3.501 3.501 0 0 0 3.515 3.516ZM4.391 7.34H75.29c2.002 0 3.515-1.563 3.515-3.516 0-2.002-1.513-3.564-3.515-3.564H4.39C2.438.26.876 1.822.876 3.824A3.501 3.501 0 0 0 4.39 7.34Z"></path></svg></div><div class="vocs_MobileTopNav_menuTitle">Leverage Sequence Analytics API in Dune</div></button></div></div><div class="vocs_MobileTopNav_curtainGroup"><div class="vocs_MobileTopNav_curtainItem"><button type="button" aria-haspopup="dialog" aria-expanded="false" aria-controls="radix-:R5aj:" data-state="closed" class="vocs_MobileTopNav_outlineTrigger">On this page<div aria-label="On this page" class="vocs_Icon" role="img" style="--vocs_Icon_size:10px"><svg width="100%" height="100%" viewBox="0 0 39 69" fill="none" xmlns="http://www.w3.org/2000/svg"><title>Chevron Right</title><path d="M38.8697 34.7461C38.8697 33.6719 38.4791 32.6953 37.649 31.8652L7.47318 1.8848C6.74078 1.1035 5.76418 0.712891 4.64118 0.712891C2.34618 0.712891 0.588379 2.42189 0.588379 4.71679C0.588379 5.79099 1.07668 6.81639 1.76028 7.59769L29.0552 34.7461L1.76028 61.8945C1.07668 62.6758 0.588379 63.6523 0.588379 64.7754C0.588379 67.0703 2.34618 68.7793 4.64118 68.7793C5.76418 68.7793 6.74078 68.3887 7.47318 67.6074L37.649 37.627C38.4791 36.7969 38.8697 35.8203 38.8697 34.7461Z" fill="currentColor"></path></svg></div></button></div></div></div></div><div class="vocs_DocsLayout_gutterRight vocs_DocsLayout_gutterRight_withSidebar"></div><div id="vocs-content" class="vocs_DocsLayout_content vocs_DocsLayout_content_withSidebar vocs_DocsLayout_content_withTopNav"><article class="vocs_Content"><header class="vocs_Header"><h1 class="vocs_H1 vocs_Heading"><div id="sequence-analytics-api-in-dune" class="vocs_Heading_slugTarget"></div>Sequence Analytics API in Dune<a class="vocs_Anchor vocs_Autolink" aria-hidden="true" tabindex="-1" href="/guides/analytics-guide#sequence-analytics-api-in-dune"><div data-autolink-icon="true" class="vocs_Div vocs_AutolinkIcon" style="--vocs_AutolinkIcon_iconUrl:url(/.vocs/icons/link.svg)"></div></a></h1></header>
<p class="vocs_Paragraph">Time to complete: 20-30 minutes</p>
<p class="vocs_Paragraph">In this guide, we will show you how to use the <a class="vocs_Anchor vocs_Link vocs_Link_accent_underlined vocs_ExternalLink" href="https://sequence.build/" target="_blank" rel="noopener noreferrer" style="--vocs_ExternalLink_iconUrl:url(/.vocs/icons/arrow-diagonal.svg)">Sequence Builder</a> analytics feature to query information about usage from your users for your specific project leveraging a serverless <a class="vocs_Anchor vocs_Link vocs_Link_accent_underlined vocs_ExternalLink" href="https://www.cloudflare.com/" target="_blank" rel="noopener noreferrer" style="--vocs_ExternalLink_iconUrl:url(/.vocs/icons/arrow-diagonal.svg)">Cloudflare Worker</a>.</p>
<p class="vocs_Paragraph">Showcase to your community how well you&#x27;re doing via a <a class="vocs_Anchor vocs_Link vocs_Link_accent_underlined vocs_ExternalLink" href="https://dune.com/" target="_blank" rel="noopener noreferrer" style="--vocs_ExternalLink_iconUrl:url(/.vocs/icons/arrow-diagonal.svg)">Dune</a> dashboard to give a sense of connectiveness, or, use the produced API to incorporate intelligent feedback loops into your game driven by user analytics.</p>
<p class="vocs_Paragraph">You can view an example of the output for this guide <a class="vocs_Anchor vocs_Link vocs_Link_accent_underlined vocs_ExternalLink" href="https://dune.com/mmhorizon/dungon-minter-analytics" target="_blank" rel="noopener noreferrer" style="--vocs_ExternalLink_iconUrl:url(/.vocs/icons/arrow-diagonal.svg)">here</a></p>
<ol class="vocs_List vocs_List_ordered">
<li class="vocs_ListItem"><a class="vocs_Anchor vocs_Link vocs_Link_accent_underlined" href="/guides/analytics-guide#1-access-key-management">Access Key Management</a>: Claim a secret access key to interact with the Sequence stack</li>
<li class="vocs_ListItem"><a class="vocs_Anchor vocs_Link vocs_Link_accent_underlined" href="/guides/analytics-guide#2-cloudflare-worker">Cloudflare Worker</a>: Create a function that queries the Sequence stack and produces project specific data points</li>
<li class="vocs_ListItem"><a class="vocs_Anchor vocs_Link vocs_Link_accent_underlined" href="/guides/analytics-guide#3-dune-dashboard">Dune Dashboard</a>: Create a view into the data as a shareable dashboard</li>
</ol>
<aside class="vocs_Callout vocs_Callout_info"><p class="vocs_Paragraph">A reference to the template code can be found <a class="vocs_Anchor vocs_Link vocs_Link_accent_underlined vocs_ExternalLink" href="https://github.com/0xsequence-demos/template-cloudflare-worker-wallets-analytics" target="_blank" rel="noopener noreferrer" style="--vocs_ExternalLink_iconUrl:url(/.vocs/icons/arrow-diagonal.svg)">here</a></p></aside>
<h2 class="vocs_H2 vocs_Heading"><div id="1-access-key-management" class="vocs_Heading_slugTarget"></div>1. Access Key Management<a class="vocs_Anchor vocs_Autolink" aria-hidden="true" tabindex="-1" href="/guides/analytics-guide#1-access-key-management"><div data-autolink-icon="true" class="vocs_Div vocs_AutolinkIcon" style="--vocs_AutolinkIcon_iconUrl:url(/.vocs/icons/link.svg)"></div></a></h2>
<p class="vocs_Paragraph">You&#x27;ll need to acquire a Secret Access Key for your project in order to authenticate your application with the Sequence stack. Use the following steps:</p>
<h3 class="vocs_H3 vocs_Heading"><div id="secret-access-key-creation" class="vocs_Heading_slugTarget"></div>Secret Access Key Creation<a class="vocs_Anchor vocs_Autolink" aria-hidden="true" tabindex="-1" href="/guides/analytics-guide#secret-access-key-creation"><div data-autolink-icon="true" class="vocs_Div vocs_AutolinkIcon" style="--vocs_AutolinkIcon_iconUrl:url(/.vocs/icons/link.svg)"></div></a></h3>
<div class="vocs_Steps"><div class="vocs_Step"><h4 class="vocs_Step_title vocs_H4 vocs_Heading"><div id="access-settings" class="vocs_Heading_slugTarget"></div>Access Settings<a class="vocs_Anchor vocs_Autolink" aria-hidden="true" tabindex="-1" href="/guides/analytics-guide#access-settings"><div data-autolink-icon="true" class="vocs_Div vocs_AutolinkIcon" style="--vocs_AutolinkIcon_iconUrl:url(/.vocs/icons/link.svg)"></div></a></h4><div class="vocs_Step_content"><p class="vocs_Paragraph">First start by accessing settings, and selecting the API Keys card:</p><p class="vocs_Paragraph"><img src="/img/builder/builder_settings_access_keys.png" alt="builder settings access keys"/></p></div></div><div class="vocs_Step"><h4 class="vocs_Step_title vocs_H4 vocs_Heading"><div id="add-service-account" class="vocs_Heading_slugTarget"></div>Add Service Account<a class="vocs_Anchor vocs_Autolink" aria-hidden="true" tabindex="-1" href="/guides/analytics-guide#add-service-account"><div data-autolink-icon="true" class="vocs_Div vocs_AutolinkIcon" style="--vocs_AutolinkIcon_iconUrl:url(/.vocs/icons/link.svg)"></div></a></h4><div class="vocs_Step_content"><p class="vocs_Paragraph">Scroll down and select <code class="vocs_Code">+ Add Service Account</code>:</p><p class="vocs_Paragraph"><img src="/img/builder/builder_settings_add_service_account.png" alt="builder settings add service account"/></p></div></div><div class="vocs_Step"><h4 class="vocs_Step_title vocs_H4 vocs_Heading"><div id="select-write-permission" class="vocs_Heading_slugTarget"></div>Select Write Permission<a class="vocs_Anchor vocs_Autolink" aria-hidden="true" tabindex="-1" href="/guides/analytics-guide#select-write-permission"><div data-autolink-icon="true" class="vocs_Div vocs_AutolinkIcon" style="--vocs_AutolinkIcon_iconUrl:url(/.vocs/icons/link.svg)"></div></a></h4><div class="vocs_Step_content"><p class="vocs_Paragraph">Then change the permission to <code class="vocs_Code">Write</code>, click on <code class="vocs_Code">+ Add Service Account</code>, and select <code class="vocs_Code">Confirm</code>:</p><p class="vocs_Paragraph"><img src="/img/builder/builder_settings_add_service_account_confirm.png" alt="builder settings add service account"/></p><p class="vocs_Paragraph">Finally <code class="vocs_Code">copy</code> the key and store it in a safe location, as you will not have access to this in the future from the Sequence Builder.</p></div></div></div>
<h2 class="vocs_H2 vocs_Heading"><div id="2-cloudflare-worker" class="vocs_Heading_slugTarget"></div>2. Cloudflare Worker<a class="vocs_Anchor vocs_Autolink" aria-hidden="true" tabindex="-1" href="/guides/analytics-guide#2-cloudflare-worker"><div data-autolink-icon="true" class="vocs_Div vocs_AutolinkIcon" style="--vocs_AutolinkIcon_iconUrl:url(/.vocs/icons/link.svg)"></div></a></h2>
<p class="vocs_Paragraph">In this example, we utilize a Cloudflare Worker to experience automatic scaling based on dashboard use, and easy deployments from the cli, but of course you can use your own backend or other serverless alternatives.</p>
<div class="vocs_Steps"><div class="vocs_Step"><h3 class="vocs_Step_title vocs_H3 vocs_Heading"><div id="create-project" class="vocs_Heading_slugTarget"></div>Create Project<a class="vocs_Anchor vocs_Autolink" aria-hidden="true" tabindex="-1" href="/guides/analytics-guide#create-project"><div data-autolink-icon="true" class="vocs_Div vocs_AutolinkIcon" style="--vocs_AutolinkIcon_iconUrl:url(/.vocs/icons/link.svg)"></div></a></h3><div class="vocs_Step_content"><p class="vocs_Paragraph">In order to create the project from scratch, first create a project with <code class="vocs_Code">mkdir</code>, <code class="vocs_Code">cd</code> into the project, and run <code class="vocs_Code">pnpm init</code> to create a <code class="vocs_Code">package.json</code>.</p></div></div><div class="vocs_Step"><h3 class="vocs_Step_title vocs_H3 vocs_Heading"><div id="hello-world-worker" class="vocs_Heading_slugTarget"></div>&quot;Hello World&quot; Worker<a class="vocs_Anchor vocs_Autolink" aria-hidden="true" tabindex="-1" href="/guides/analytics-guide#hello-world-worker"><div data-autolink-icon="true" class="vocs_Div vocs_AutolinkIcon" style="--vocs_AutolinkIcon_iconUrl:url(/.vocs/icons/link.svg)"></div></a></h3><div class="vocs_Step_content"><p class="vocs_Paragraph">Make sure wrangler cli is installed in your project and set the <code class="vocs_Code">wrangler</code> keyword as an alias in your local bash session.</p><div class="vocs_CodeBlock"><div class="vocs_Pre_wrapper"><pre style="background-color:#fff;--shiki-dark-bg:#22272e;color:#24292e;--shiki-dark:#adbac7" tabindex="0" class="shiki shiki-themes github-light github-dark-dimmed vocs_Pre"><code class="vocs_Code"><span class="line vocs_Span"><span style="color:#6F42C1;--shiki-dark:#F69D50" class="vocs_Span">pnpm</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span"> install</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span"> wrangler</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> --save-dev</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">alias</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> wrangler</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">=</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">&#x27;./node_modules/.bin/wrangler&#x27;</span></span></code></pre></div></div><p class="vocs_Paragraph">Create an account on the <a class="vocs_Anchor vocs_Link vocs_Link_accent_underlined vocs_ExternalLink" href="https://cloudflare.com/" target="_blank" rel="noopener noreferrer" style="--vocs_ExternalLink_iconUrl:url(/.vocs/icons/arrow-diagonal.svg)">Cloudflare site</a> and perform a login step to login to your Cloudflare dashboard to connect the Cloudflare platform to your local development environment.</p><div class="vocs_CodeBlock"><div class="vocs_Pre_wrapper"><pre style="background-color:#fff;--shiki-dark-bg:#22272e;color:#24292e;--shiki-dark:#adbac7" tabindex="0" class="shiki shiki-themes github-light github-dark-dimmed vocs_Pre"><code class="vocs_Code"><span class="line vocs_Span"><span style="color:#6F42C1;--shiki-dark:#F69D50" class="vocs_Span">wrangler</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span"> login</span></span></code></pre></div></div><p class="vocs_Paragraph">Once logged in, initialize the project in the directory with the command <code class="vocs_Code">wrangler init</code> and accept one of the randomly generated project folder names provided that you like, and follow the prompts to initialize your git tracked typescript <code class="vocs_Code">&quot;Hello World&quot; Worker</code> application.</p><div class="vocs_CodeBlock"><div class="vocs_Pre_wrapper"><pre style="background-color:#fff;--shiki-dark-bg:#22272e;color:#24292e;--shiki-dark:#adbac7" tabindex="0" class="shiki shiki-themes github-light github-dark-dimmed vocs_Pre"><code class="vocs_Code"><span class="line vocs_Span"><span style="color:#6F42C1;--shiki-dark:#F69D50" class="vocs_Span">wrangler</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span"> init</span></span></code></pre></div></div><p class="vocs_Paragraph">To complete this step, you should press enter 4 times after <code class="vocs_Code">wrangler init</code> with the last 2 step answered as <code class="vocs_Code">No</code> to decline git versioning and deployment.</p><p class="vocs_Paragraph">This will clone down a starter repository that can be used to deploy code to the cloud.</p><aside class="vocs_Callout vocs_Callout_info"><p class="vocs_Paragraph">Local API Testing <br/>
At any point in the guide, you can use the <code class="vocs_Code">wrangler dev</code> command in the project folder for local testing</p></aside><h4 class="vocs_H4 vocs_Heading"><div id="deploy-test" class="vocs_Heading_slugTarget"></div>Deploy Test<a class="vocs_Anchor vocs_Autolink" aria-hidden="true" tabindex="-1" href="/guides/analytics-guide#deploy-test"><div data-autolink-icon="true" class="vocs_Div vocs_AutolinkIcon" style="--vocs_AutolinkIcon_iconUrl:url(/.vocs/icons/link.svg)"></div></a></h4><p class="vocs_Paragraph">Finally, <code class="vocs_Code">cd</code> into the randomly generated project folder, and perform a <code class="vocs_Code">wrangler deploy</code> command.</p><p class="vocs_Paragraph">This should print a URL, which you can enter in the browser the URL <code class="vocs_Code">https://&lt;app&gt;.&lt;account&gt;.workers.dev</code> to view the <code class="vocs_Code">Hello World!</code> result.</p></div></div><div class="vocs_Step"><h3 class="vocs_Step_title vocs_H3 vocs_Heading"><div id="setup-config-routes--mock-functions" class="vocs_Heading_slugTarget"></div>Setup Config, Routes, &amp; Mock functions<a class="vocs_Anchor vocs_Autolink" aria-hidden="true" tabindex="-1" href="/guides/analytics-guide#setup-config-routes--mock-functions"><div data-autolink-icon="true" class="vocs_Div vocs_AutolinkIcon" style="--vocs_AutolinkIcon_iconUrl:url(/.vocs/icons/link.svg)"></div></a></h3><div class="vocs_Step_content"><p class="vocs_Paragraph">Once you have the project setup, update your <code class="vocs_Code">wrangler.toml</code> with the following variables, where <code class="vocs_Code">DAYS</code> is the time period you&#x27;re looking at:</p><div class="vocs_CodeBlock"><div class="vocs_Pre_wrapper"><pre style="background-color:#fff;--shiki-dark-bg:#22272e;color:#24292e;--shiki-dark:#adbac7" tabindex="0" class="shiki shiki-themes github-light github-dark-dimmed vocs_Pre"><code class="vocs_Code"><span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">[vars]</span></span>
<span class="line vocs_Span"><span style="color:#6F42C1;--shiki-dark:#F69D50" class="vocs_Span">SECRET_API_ACCESS_KEY</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span"> =</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span"> &quot;&lt;SECRET_API_ACCESS_KEY&gt;&quot;</span></span>
<span class="line vocs_Span"><span style="color:#6F42C1;--shiki-dark:#F69D50" class="vocs_Span">PROJECT_ID</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span"> =</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> &lt;</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">PROJECT_I</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">D</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">&gt;</span></span>
<span class="line vocs_Span"><span style="color:#6F42C1;--shiki-dark:#F69D50" class="vocs_Span">DAYS</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span"> =</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> &lt;</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">DAY</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">S</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">&gt;</span></span></code></pre></div></div><p class="vocs_Paragraph">Then include the <code class="vocs_Code">Env</code> type with the variables in <code class="vocs_Code">index.ts</code>:</p><div class="vocs_CodeBlock"><div class="vocs_Pre_wrapper"><pre style="background-color:#fff;--shiki-dark-bg:#22272e;color:#24292e;--shiki-dark:#adbac7" tabindex="0" class="shiki shiki-themes github-light github-dark-dimmed vocs_Pre"><code class="vocs_Code"><span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">export</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> interface</span><span style="color:#6F42C1;--shiki-dark:#F69D50" class="vocs_Span"> Env</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> {</span></span>
<span class="line vocs_Span"><span style="color:#E36209;--shiki-dark:#F69D50" class="vocs_Span">	PROJECT_ID</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">:</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> number</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">;</span></span>
<span class="line vocs_Span"><span style="color:#E36209;--shiki-dark:#F69D50" class="vocs_Span">	SECRET_API_ACCESS_KEY</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">:</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> string</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">;</span></span>
<span class="line vocs_Span"><span style="color:#E36209;--shiki-dark:#F69D50" class="vocs_Span">	DAYS</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">:</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> number</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">;</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">}</span></span></code></pre></div></div><p class="vocs_Paragraph">Replace the existing <code class="vocs_Code">fetch</code> function with the following mocked function calls:</p><div class="vocs_CodeBlock"><div class="vocs_Pre_wrapper"><pre style="background-color:#fff;--shiki-dark-bg:#22272e;color:#24292e;--shiki-dark:#adbac7" tabindex="0" class="shiki shiki-themes github-light github-dark-dimmed vocs_Pre"><code class="vocs_Code"><span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">export</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> default</span><span style="color:#24292E;--shiki-dark:#F69D50" class="vocs_Span"> {</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">	async</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span"> fetch</span><span style="color:#24292E;--shiki-dark:#F69D50" class="vocs_Span">(</span><span style="color:#E36209;--shiki-dark:#F69D50" class="vocs_Span">request</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">:</span><span style="color:#6F42C1;--shiki-dark:#F69D50" class="vocs_Span"> Request</span><span style="color:#24292E;--shiki-dark:#F69D50" class="vocs_Span">, </span><span style="color:#E36209;--shiki-dark:#F69D50" class="vocs_Span">env</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">:</span><span style="color:#6F42C1;--shiki-dark:#F69D50" class="vocs_Span"> Env</span><span style="color:#24292E;--shiki-dark:#F69D50" class="vocs_Span">, </span><span style="color:#E36209;--shiki-dark:#F69D50" class="vocs_Span">ctx</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">:</span><span style="color:#6F42C1;--shiki-dark:#F69D50" class="vocs_Span"> ExecutionContext</span><span style="color:#24292E;--shiki-dark:#F69D50" class="vocs_Span">)</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">:</span><span style="color:#6F42C1;--shiki-dark:#F69D50" class="vocs_Span"> Promise</span><span style="color:#24292E;--shiki-dark:#F69D50" class="vocs_Span">&lt;</span><span style="color:#6F42C1;--shiki-dark:#F69D50" class="vocs_Span">Response</span><span style="color:#24292E;--shiki-dark:#F69D50" class="vocs_Span">&gt; </span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">{</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">		const</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> url</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> =</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> new</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span"> URL</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(request.url);</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">		</span></span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">		// Handle different endpoints</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">		if</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> (url.pathname </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">===</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span"> &quot;/dailyActiveUsers&quot;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">) {</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">			return</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span"> handleDailyWallets</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(env, request);</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">		} </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">else</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> if</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> (url.pathname </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">===</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span"> &quot;/totalTransactionsSent&quot;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">) {</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">			return</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span"> handleTotalTxns</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(env, request);</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">		} </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">else</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> {</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">			return</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> new</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span"> Response</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">&quot;No function for this URL&quot;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">, { status: </span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">405</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> });</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">		}</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">	}</span><span style="color:#24292E;--shiki-dark:#F69D50" class="vocs_Span">,</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#F69D50" class="vocs_Span">}</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">;</span></span></code></pre></div></div><p class="vocs_Paragraph">Using the following functions:</p><div class="vocs_CodeBlock"><div class="vocs_Pre_wrapper"><pre style="background-color:#fff;--shiki-dark-bg:#22272e;color:#24292e;--shiki-dark:#adbac7" tabindex="0" class="shiki shiki-themes github-light github-dark-dimmed vocs_Pre"><code class="vocs_Code"><span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">const</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span"> handleDailyWallets</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> =</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> async</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> (</span><span style="color:#E36209;--shiki-dark:#F69D50" class="vocs_Span">env</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">:</span><span style="color:#6F42C1;--shiki-dark:#F69D50" class="vocs_Span"> Env</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">, </span><span style="color:#E36209;--shiki-dark:#F69D50" class="vocs_Span">request</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">:</span><span style="color:#6F42C1;--shiki-dark:#F69D50" class="vocs_Span"> Request</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">) </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">=&gt;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> {</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">	return</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> new</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span"> Response</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">JSON</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">.</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">stringify</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">({endpoint: </span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">&#x27;daily&#x27;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">}), { status: </span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">200</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> });</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">}</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">const</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span"> handleTotalTxns</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> =</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> async</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> (</span><span style="color:#E36209;--shiki-dark:#F69D50" class="vocs_Span">env</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">:</span><span style="color:#6F42C1;--shiki-dark:#F69D50" class="vocs_Span"> Env</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">, </span><span style="color:#E36209;--shiki-dark:#F69D50" class="vocs_Span">request</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">:</span><span style="color:#6F42C1;--shiki-dark:#F69D50" class="vocs_Span"> Request</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">) </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">=&gt;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> {</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">	return</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> new</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span"> Response</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">JSON</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">.</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">stringify</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">({endpoint: </span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">&#x27;total&#x27;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">}), { status: </span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">200</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> });</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">}</span></span></code></pre></div></div></div></div><div class="vocs_Step"><h3 class="vocs_Step_title vocs_H3 vocs_Heading"><div id="date-formatting" class="vocs_Heading_slugTarget"></div>Date Formatting<a class="vocs_Anchor vocs_Autolink" aria-hidden="true" tabindex="-1" href="/guides/analytics-guide#date-formatting"><div data-autolink-icon="true" class="vocs_Div vocs_AutolinkIcon" style="--vocs_AutolinkIcon_iconUrl:url(/.vocs/icons/link.svg)"></div></a></h3><div class="vocs_Step_content"><p class="vocs_Paragraph">Next, include the following utility functions to parse the correct date from the updated value in the <code class="vocs_Code">wrangler.toml</code> for the <code class="vocs_Code">DAYS</code> variable:</p><div class="vocs_CodeBlock"><div class="vocs_Pre_wrapper"><pre style="background-color:#fff;--shiki-dark-bg:#22272e;color:#24292e;--shiki-dark:#adbac7" tabindex="0" class="shiki shiki-themes github-light github-dark-dimmed vocs_Pre"><code class="vocs_Code"><span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">const</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span"> endDate</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> =</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> () </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">=&gt;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> {</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">	const</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> today</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> =</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> new</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span"> Date</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">();</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">	return</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> today.</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">toISOString</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">().</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">substring</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">0</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">, </span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">10</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">); </span><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">// only including the YYYY-MM-DD date</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">}</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">const</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span"> startDate</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> =</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> (</span><span style="color:#E36209;--shiki-dark:#F69D50" class="vocs_Span">env</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">:</span><span style="color:#6F42C1;--shiki-dark:#F69D50" class="vocs_Span"> Env</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">) </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">=&gt;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> {</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">	const</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> today</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> =</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> new</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span"> Date</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">();</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">	// Format today&#x27;s date as a string</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">	const</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> daysBefore</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> =</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> new</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span"> Date</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(today);</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">	daysBefore.</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">setDate</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(daysBefore.</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">getDate</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">() </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">-</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> env.</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">DAYS</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">);</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">	</span></span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">	// Format the date 7 days before as a string by only including the YYYY-MM-DD date</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">	const</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> daysBeforeString</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> =</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> daysBefore.</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">toISOString</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">().</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">substring</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">0</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">, </span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">10</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">);</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">	return</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> daysBeforeString</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">}</span></span></code></pre></div></div></div></div><div class="vocs_Step"><h3 class="vocs_Step_title vocs_H3 vocs_Heading"><div id="daily-active-users" class="vocs_Heading_slugTarget"></div>Daily Active Users<a class="vocs_Anchor vocs_Autolink" aria-hidden="true" tabindex="-1" href="/guides/analytics-guide#daily-active-users"><div data-autolink-icon="true" class="vocs_Div vocs_AutolinkIcon" style="--vocs_AutolinkIcon_iconUrl:url(/.vocs/icons/link.svg)"></div></a></h3><div class="vocs_Step_content"><p class="vocs_Paragraph">Now, handle the <code class="vocs_Code">Daily Active Users</code> request by using the following function, that calls the Sequence Analytics API:</p><div class="vocs_CodeBlock"><div class="vocs_Pre_wrapper"><pre style="background-color:#fff;--shiki-dark-bg:#22272e;color:#24292e;--shiki-dark:#adbac7" tabindex="0" class="shiki shiki-themes github-light github-dark-dimmed vocs_Pre"><code class="vocs_Code"><span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">const</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span"> handleDailyWallets</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> =</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> async</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> (</span><span style="color:#E36209;--shiki-dark:#F69D50" class="vocs_Span">env</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">:</span><span style="color:#6F42C1;--shiki-dark:#F69D50" class="vocs_Span"> Env</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">, </span><span style="color:#E36209;--shiki-dark:#F69D50" class="vocs_Span">request</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">:</span><span style="color:#6F42C1;--shiki-dark:#F69D50" class="vocs_Span"> Request</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">) </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">=&gt;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> {</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">	const</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> resp</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> =</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> await</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span"> fetch</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(</span></span>
<span class="line vocs_Span"><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">	`https://api.sequence.build/rpc/Builder/WalletsDaily`</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">,</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">		{</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">			method: </span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">&#x27;POST&#x27;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">,</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">			headers: {</span></span>
<span class="line vocs_Span"><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">			&#x27;Content-Type&#x27;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">: </span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">&#x27;application/json&#x27;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">,</span></span>
<span class="line vocs_Span"><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">			&#x27;Authorization&#x27;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">: </span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">`Bearer ${</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">env</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">.</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">SECRET_API_ACCESS_KEY</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">}`</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">			},</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">			body: </span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">JSON</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">.</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">stringify</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">({</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">			filter: {</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">				dateInterval: </span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">&#x27;DAY&#x27;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">,</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">				endDate: </span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">endDate</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(),</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">				projectId: env.</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">PROJECT_ID</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">,</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">				startDate: </span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">startDate</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(env)</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">			}</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">			})</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">		}</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">	)</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">	</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">	const</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> data</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">:</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> any</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> =</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> await</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> resp.</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">json</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">();</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">	return</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> new</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span"> Response</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">JSON</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">.</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">stringify</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(data.walletStats), { status: </span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">200</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> });</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">}</span></span></code></pre></div></div></div></div><div class="vocs_Step"><h3 class="vocs_Step_title vocs_H3 vocs_Heading"><div id="total-transactions-sent" class="vocs_Heading_slugTarget"></div>Total Transactions Sent<a class="vocs_Anchor vocs_Autolink" aria-hidden="true" tabindex="-1" href="/guides/analytics-guide#total-transactions-sent"><div data-autolink-icon="true" class="vocs_Div vocs_AutolinkIcon" style="--vocs_AutolinkIcon_iconUrl:url(/.vocs/icons/link.svg)"></div></a></h3><div class="vocs_Step_content"><p class="vocs_Paragraph">Finally, add the following function for the <code class="vocs_Code">Total Transactions Sent</code>:</p><div class="vocs_CodeBlock"><div class="vocs_Pre_wrapper"><pre style="background-color:#fff;--shiki-dark-bg:#22272e;color:#24292e;--shiki-dark:#adbac7" tabindex="0" class="shiki shiki-themes github-light github-dark-dimmed vocs_Pre"><code class="vocs_Code"><span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">const</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span"> handleTotalTxns</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> =</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> async</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> (</span><span style="color:#E36209;--shiki-dark:#F69D50" class="vocs_Span">env</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">:</span><span style="color:#6F42C1;--shiki-dark:#F69D50" class="vocs_Span"> Env</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">, </span><span style="color:#E36209;--shiki-dark:#F69D50" class="vocs_Span">request</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">:</span><span style="color:#6F42C1;--shiki-dark:#F69D50" class="vocs_Span"> Request</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">) </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">=&gt;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> {</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">	const</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> resp</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> =</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> await</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span"> fetch</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(</span></span>
<span class="line vocs_Span"><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">	`https://api.sequence.build/rpc/Builder/WalletsTxnSentTotal`</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">,</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">		{</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">		  method: </span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">&#x27;POST&#x27;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">,</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">		  headers: {</span></span>
<span class="line vocs_Span"><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">			&#x27;Content-Type&#x27;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">: </span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">&#x27;application/json&#x27;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">,</span></span>
<span class="line vocs_Span"><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">			&#x27;Authorization&#x27;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">: </span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">`Bearer ${</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">env</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">.</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">SECRET_API_ACCESS_KEY</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">}`</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">		  },</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">		  body: </span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">JSON</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">.</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">stringify</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">({</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">			filter: {</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">			  dateInterval: </span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">&#x27;DAY&#x27;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">,</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">			  endDate: </span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">endDate</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(),</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">			  projectId: env.</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">PROJECT_ID</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">,</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">			  startDate: </span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">startDate</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(env)</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">			}</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">		  })</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">		}</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">	)</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">	</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">	const</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> data</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">:</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> any</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> =</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> await</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> resp.</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">json</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">();</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">	return</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> new</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span"> Response</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">JSON</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">.</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">stringify</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(data.walletStats), { status: </span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">200</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> });</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">}</span></span></code></pre></div></div></div></div></div>
<p class="vocs_Paragraph">Now you can test your API by calling the respective paths with host name (<code class="vocs_Code">/dailyActiveUsers</code> &amp; <code class="vocs_Code">/totalTransactionsSent</code>) once you have redeployed with <code class="vocs_Code">wrangler deploy</code>.</p>
<aside class="vocs_Callout vocs_Callout_info"><p class="vocs_Paragraph">For more examples of endpoints available through the Analytics API, please check out the <a class="vocs_Anchor vocs_Link vocs_Link_accent_underlined" href="/api/analytics/overview">overview</a> page.</p></aside>
<h2 class="vocs_H2 vocs_Heading"><div id="3-dune-dashboard" class="vocs_Heading_slugTarget"></div>3. Dune Dashboard<a class="vocs_Anchor vocs_Autolink" aria-hidden="true" tabindex="-1" href="/guides/analytics-guide#3-dune-dashboard"><div data-autolink-icon="true" class="vocs_Div vocs_AutolinkIcon" style="--vocs_AutolinkIcon_iconUrl:url(/.vocs/icons/link.svg)"></div></a></h2>
<div class="vocs_Steps"><div class="vocs_Step"><h3 class="vocs_Step_title vocs_H3 vocs_Heading"><div id="dune-sign-up" class="vocs_Heading_slugTarget"></div>Dune Sign Up<a class="vocs_Anchor vocs_Autolink" aria-hidden="true" tabindex="-1" href="/guides/analytics-guide#dune-sign-up"><div data-autolink-icon="true" class="vocs_Div vocs_AutolinkIcon" style="--vocs_AutolinkIcon_iconUrl:url(/.vocs/icons/link.svg)"></div></a></h3><div class="vocs_Step_content"><p class="vocs_Paragraph">First, sign up to <a class="vocs_Anchor vocs_Link vocs_Link_accent_underlined vocs_ExternalLink" href="https://dune.com/" target="_blank" rel="noopener noreferrer" style="--vocs_ExternalLink_iconUrl:url(/.vocs/icons/arrow-diagonal.svg)">Dune</a></p></div></div><div class="vocs_Step"><h3 class="vocs_Step_title vocs_H3 vocs_Heading"><div id="create-query" class="vocs_Heading_slugTarget"></div>Create Query<a class="vocs_Anchor vocs_Autolink" aria-hidden="true" tabindex="-1" href="/guides/analytics-guide#create-query"><div data-autolink-icon="true" class="vocs_Div vocs_AutolinkIcon" style="--vocs_AutolinkIcon_iconUrl:url(/.vocs/icons/link.svg)"></div></a></h3><div class="vocs_Step_content"><p class="vocs_Paragraph">Access your account at <code class="vocs_Code">https://dune.com/&lt;account&gt;</code> and select the <code class="vocs_Code">Create</code> button and <code class="vocs_Code">New query</code>.</p><p class="vocs_Paragraph"><img src="/img/guides/analytics/dune_create_query.png" alt="dune create query"/></p></div></div><div class="vocs_Step"><h3 class="vocs_Step_title vocs_H3 vocs_Heading"><div id="daily-active-users-query" class="vocs_Heading_slugTarget"></div>Daily Active Users Query<a class="vocs_Anchor vocs_Autolink" aria-hidden="true" tabindex="-1" href="/guides/analytics-guide#daily-active-users-query"><div data-autolink-icon="true" class="vocs_Div vocs_AutolinkIcon" style="--vocs_AutolinkIcon_iconUrl:url(/.vocs/icons/link.svg)"></div></a></h3><div class="vocs_Step_content"><p class="vocs_Paragraph">Input the following SQL query in the console, and select <code class="vocs_Code">Run</code>:</p><div class="vocs_CodeBlock"><div class="vocs_Pre_wrapper"><pre style="background-color:#fff;--shiki-dark-bg:#22272e;color:#24292e;--shiki-dark:#adbac7" tabindex="0" class="shiki shiki-themes github-light github-dark-dimmed vocs_Pre"><code class="vocs_Code"><span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">SELECT</span></span>
<span class="line vocs_Span"><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">  t</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">.</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">label</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> as</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span"> &quot;Date&quot;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">, </span><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">-- converting the label to &quot;Date&quot;</span></span>
<span class="line vocs_Span"><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">  t</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">.</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">value</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> as</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span"> &quot;Count&quot;</span><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span"> -- converting the value field to &quot;Count&quot;</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">FROM</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> UNNEST(</span></span>
<span class="line vocs_Span"><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">  TRY_CAST</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">    JSON_PARSE(HTTP_GET(</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">&#x27;https://&lt;URL&gt;/dailyActiveUsers&#x27;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">)) </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">AS</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> ARRAY</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">ROW</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(label </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">VARCHAR</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">, </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">value</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> DOUBLE))</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">  )</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">) </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">AS</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> t(label, </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">value</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">)</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span></code></pre></div></div><p class="vocs_Paragraph">Once the results have been returned, create a <code class="vocs_Code">New visualization</code>.</p><p class="vocs_Paragraph">Then, select <code class="vocs_Code">Add visualization</code> after the default <code class="vocs_Code">Bar chart</code> is selected from the dropdown (but feel free to customize this).</p><p class="vocs_Paragraph"><img src="/img/guides/analytics/dune_add_visualization.png" alt="add visualization"/></p><p class="vocs_Paragraph">Finally, click <code class="vocs_Code">Save</code> and add a name to your query.</p><p class="vocs_Paragraph"><img src="/img/guides/analytics/dune_query_save.png" alt="save query"/></p></div></div><div class="vocs_Step"><h3 class="vocs_Step_title vocs_H3 vocs_Heading"><div id="total-transactions-sent-query" class="vocs_Heading_slugTarget"></div>Total Transactions Sent Query<a class="vocs_Anchor vocs_Autolink" aria-hidden="true" tabindex="-1" href="/guides/analytics-guide#total-transactions-sent-query"><div data-autolink-icon="true" class="vocs_Div vocs_AutolinkIcon" style="--vocs_AutolinkIcon_iconUrl:url(/.vocs/icons/link.svg)"></div></a></h3><div class="vocs_Step_content"><p class="vocs_Paragraph">Repeat the steps from the <a class="vocs_Anchor vocs_Link vocs_Link_accent_underlined" href="/guides/analytics-guide#create-query">previous step</a> and use the following SQL query:</p><div class="vocs_CodeBlock"><div class="vocs_Pre_wrapper"><pre style="background-color:#fff;--shiki-dark-bg:#22272e;color:#24292e;--shiki-dark:#adbac7" tabindex="0" class="shiki shiki-themes github-light github-dark-dimmed vocs_Pre"><code class="vocs_Code"><span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">SELECT</span></span>
<span class="line vocs_Span"><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">  t</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">.</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">label</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">,</span></span>
<span class="line vocs_Span"><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">  t</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">.</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">value</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">FROM</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> UNNEST(</span></span>
<span class="line vocs_Span"><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">  TRY_CAST</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">    JSON_PARSE(HTTP_GET(</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">&#x27;https://&lt;URL&gt;/totalTransactionsSent&#x27;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">)) </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">AS</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> ARRAY</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">ROW</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(label </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">VARCHAR</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">, </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">value</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> DOUBLE))</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">  )</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">) </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">AS</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> t(label, </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">value</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">)</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span></code></pre></div></div><p class="vocs_Paragraph">Once the results have been returned, create a <code class="vocs_Code">New visualization</code>.</p><p class="vocs_Paragraph">Then, select <code class="vocs_Code">Add visualization</code> and scroll down to <code class="vocs_Code">Counter</code> to create a counter widget that returns the absolute total returned from the API.</p></div></div><div class="vocs_Step"><h3 class="vocs_Step_title vocs_H3 vocs_Heading"><div id="create-new-dashboard" class="vocs_Heading_slugTarget"></div>Create New Dashboard<a class="vocs_Anchor vocs_Autolink" aria-hidden="true" tabindex="-1" href="/guides/analytics-guide#create-new-dashboard"><div data-autolink-icon="true" class="vocs_Div vocs_AutolinkIcon" style="--vocs_AutolinkIcon_iconUrl:url(/.vocs/icons/link.svg)"></div></a></h3><div class="vocs_Step_content"><p class="vocs_Paragraph">Access the buttons that read <code class="vocs_Code">Create</code> &gt; <code class="vocs_Code">New dashboard</code> and input a name for the new dashboard.</p><p class="vocs_Paragraph"><img src="/img/guides/analytics/dune_create_dashboard.png" alt="dune create dashboard"/></p><p class="vocs_Paragraph">Once created add the previous 2 queries by selecting <code class="vocs_Code">Edit</code> and <code class="vocs_Code">Add visualization</code>.</p><p class="vocs_Paragraph"><img src="/img/guides/analytics/dune_edit_dashboard.png" alt="dune edit dashboard"/></p><p class="vocs_Paragraph"><img src="/img/guides/analytics/dune_add_visualization_from_dashboard.png" alt="dune add visualization from dashboard"/></p><p class="vocs_Paragraph">Once for each query, search for the name in the modal and select <code class="vocs_Code">Add</code> for each query, then <code class="vocs_Code">Done</code> in the modal, and <code class="vocs_Code">Done</code> in the dashboard.</p></div></div></div>
<p class="vocs_Paragraph">Congratulations, you&#x27;re now ready to share your project&#x27;s data usage with your teammates or community. Finish by clicking the <code class="vocs_Code">Share</code> button.</p>
<p class="vocs_Paragraph"><img src="/img/guides/analytics/dune_share_dashboard.png" alt="dune share dashboard"/></p></article><footer class="vocs_Footer"><div class="vocs_Footer_container"></div><div></div></footer></div><div data-bottom-observer="true"></div></div></div>
  </body>
</html>
