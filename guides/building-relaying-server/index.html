<!doctype html>
<html lang="en" class="dark">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="/initializeTheme.iife.js"></script>
    
    <title data-react-helmet="true">Building a Relaying Transaction Server â€“ Sequence</title>
    <meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" property="og:title" content="Building a Relaying Transaction Server"/><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"/>
    <link data-react-helmet="true" rel="icon" href="/img/favicon.ico" type="image/x-icon"/><link data-react-helmet="true" rel="icon" href="/img/favicon.ico" type="image/x-icon" media="(prefers-color-scheme: dark)"/>
    
    
    
  
    <script type="module" crossorigin src="/assets/index-BuoCAQh3.js"></script>
    <link rel="stylesheet" crossorigin href="/assets/style-bPriZN0b.css">
  </head>
  <body>
    <div id="app"><div class="vocs_DocsLayout" data-layout="docs"><a class="vocs_SkipLink vocs_utils_visuallyHidden" href="/guides/building-relaying-server#vocs-content">Skip to content</a><div class="vocs_DocsLayout_gutterLeft"><aside class="vocs_Sidebar vocs_DocsLayout_sidebar"><div class="vocs_Sidebar_logoWrapper"><div class="vocs_Sidebar_logo"><a style="align-items:center;display:flex;height:100%" href="/"><img alt="Logo" class="vocs_NavLogo_logoImage vocs_Logo vocs_Logo_logoDark" src="/img/sequence-composite-dark.svg"/><img alt="Logo" class="vocs_NavLogo_logoImage vocs_Logo vocs_Logo_logoLight" src="/img/sequence-composite-light.svg"/></a></div><div class="vocs_Sidebar_divider"></div></div><nav class="vocs_Sidebar_navigation"><div class="vocs_Sidebar_group"><section class="vocs_Sidebar_section vocs_Sidebar_level"><div class="vocs_Sidebar_sectionHeader" role="button" tabindex="0"><div class="vocs_Sidebar_sectionTitle">Guides</div><div role="button" tabindex="0"><div aria-label="toggle section" class="vocs_Icon vocs_Sidebar_sectionCollapse" role="img" style="--vocs_Icon_size:10px"><svg width="100%" height="100%" viewBox="0 0 39 69" fill="none" xmlns="http://www.w3.org/2000/svg"><title>Chevron Right</title><path d="M38.8697 34.7461C38.8697 33.6719 38.4791 32.6953 37.649 31.8652L7.47318 1.8848C6.74078 1.1035 5.76418 0.712891 4.64118 0.712891C2.34618 0.712891 0.588379 2.42189 0.588379 4.71679C0.588379 5.79099 1.07668 6.81639 1.76028 7.59769L29.0552 34.7461L1.76028 61.8945C1.07668 62.6758 0.588379 63.6523 0.588379 64.7754C0.588379 67.0703 2.34618 68.7793 4.64118 68.7793C5.76418 68.7793 6.74078 68.3887 7.47318 67.6074L37.649 37.627C38.4791 36.7969 38.8697 35.8203 38.8697 34.7461Z" fill="currentColor"></path></svg></div></div></div><div class="vocs_Sidebar_items"><a data-active="false" class="vocs_Sidebar_item" href="/guides/webgl-guide">Build a Game with WebGL</a><a data-active="false" class="vocs_Sidebar_item" href="/guides/unity-guide">Build a Unity Game</a><a data-active="false" class="vocs_Sidebar_item" href="/guides/mint-collectibles-serverless">Build a Collectible Minting Service</a><a data-active="false" class="vocs_Sidebar_item" href="/guides/metadata-guide">Manage Collection Metadata</a><a data-active="false" class="vocs_Sidebar_item" href="/guides/treasure-chest-guide">Build a Treasure Chest with AI Minting</a><a data-active="true" class="vocs_Sidebar_item" href="/guides/building-relaying-server">Build a Backend Transaction Service</a><a data-active="false" class="vocs_Sidebar_item" href="/guides/analytics-guide">Leverage Sequence Analytics API in Dune</a><a data-active="false" class="vocs_Sidebar_item" href="/guides/custom-marketplace">Build a Custom Marketplace</a></div></section><section class="vocs_Sidebar_section"><div class="vocs_Sidebar_items"><a data-active="false" class="vocs_Sidebar_item" href="/guides/template-overview">Templates</a></div></section></div></nav></aside></div><div class="vocs_DocsLayout_gutterTop vocs_DocsLayout_gutterTop_offsetLeftGutter"><div class="vocs_DesktopTopNav"><button class="vocs_DesktopSearch_search" type="button" aria-haspopup="dialog" aria-expanded="false" aria-controls="radix-:Rlj:" data-state="closed"><svg width="15" height="15" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg" style="margin-top:2px"><path d="M10 6.5C10 8.433 8.433 10 6.5 10C4.567 10 3 8.433 3 6.5C3 4.567 4.567 3 6.5 3C8.433 3 10 4.567 10 6.5ZM9.30884 10.0159C8.53901 10.6318 7.56251 11 6.5 11C4.01472 11 2 8.98528 2 6.5C2 4.01472 4.01472 2 6.5 2C8.98528 2 11 4.01472 11 6.5C11 7.56251 10.6318 8.53901 10.0159 9.30884L12.8536 12.1464C13.0488 12.3417 13.0488 12.6583 12.8536 12.8536C12.6583 13.0488 12.3417 13.0488 12.1464 12.8536L9.30884 10.0159Z" fill="currentColor" fill-rule="evenodd" clip-rule="evenodd"></path></svg>Search<div class="vocs_DesktopSearch_searchCommand"><div style="background:currentColor;transform:rotate(45deg);width:1.5px;border-radius:2px;height:100%"></div></div></button><div class="vocs_DesktopTopNav_logoWrapper"><div class="vocs_DesktopTopNav_logo"><a style="align-items:center;display:flex;height:56px;margin-top:4px" href="/"><img alt="Logo" class="vocs_NavLogo_logoImage vocs_Logo vocs_Logo_logoDark" src="/img/sequence-composite-dark.svg"/><img alt="Logo" class="vocs_NavLogo_logoImage vocs_Logo vocs_Logo_logoLight" src="/img/sequence-composite-light.svg"/></a></div></div><div class="vocs_DesktopTopNav_section"></div><div class="vocs_DesktopTopNav_section"><div class="vocs_DesktopTopNav_group"><nav aria-label="Main" data-orientation="horizontal" dir="ltr" class="vocs_NavigationMenu"><div style="position:relative"><ul data-orientation="horizontal" class="vocs_NavigationMenu_list" dir="ltr"><li class="vocs_DesktopTopNav_item vocs_NavigationMenu_item"><button id="radix-:Rm5j:-trigger-radix-:R6m5j:" data-state="closed" aria-expanded="false" aria-controls="radix-:Rm5j:-content-radix-:R6m5j:" data-active="false" class="vocs_NavigationMenu_trigger vocs_NavigationMenu_link" style="--vocs_NavigationMenu_chevronDownIcon:url(/.vocs/icons/chevron-down.svg)" data-radix-collection-item="">Solutions</button></li><li class="vocs_DesktopTopNav_item vocs_NavigationMenu_item"><button id="radix-:Rm5j:-trigger-radix-:Ram5j:" data-state="closed" aria-expanded="false" aria-controls="radix-:Rm5j:-content-radix-:Ram5j:" data-active="false" class="vocs_NavigationMenu_trigger vocs_NavigationMenu_link" style="--vocs_NavigationMenu_chevronDownIcon:url(/.vocs/icons/chevron-down.svg)" data-radix-collection-item="">Resources</button></li><li class="vocs_DesktopTopNav_item vocs_NavigationMenu_item"><button id="radix-:Rm5j:-trigger-radix-:Rem5j:" data-state="closed" aria-expanded="false" aria-controls="radix-:Rm5j:-content-radix-:Rem5j:" data-active="false" class="vocs_NavigationMenu_trigger vocs_NavigationMenu_link" style="--vocs_NavigationMenu_chevronDownIcon:url(/.vocs/icons/chevron-down.svg)" data-radix-collection-item="">SDKs</button></li><li class="vocs_DesktopTopNav_item vocs_NavigationMenu_item"><button id="radix-:Rm5j:-trigger-radix-:Rim5j:" data-state="closed" aria-expanded="false" aria-controls="radix-:Rm5j:-content-radix-:Rim5j:" data-active="false" class="vocs_NavigationMenu_trigger vocs_NavigationMenu_link" style="--vocs_NavigationMenu_chevronDownIcon:url(/.vocs/icons/chevron-down.svg)" data-radix-collection-item="">APIs</button></li><li class="vocs_DesktopTopNav_item vocs_NavigationMenu_item"><button id="radix-:Rm5j:-trigger-radix-:Rmm5j:" data-state="closed" aria-expanded="false" aria-controls="radix-:Rm5j:-content-radix-:Rmm5j:" data-active="false" class="vocs_NavigationMenu_trigger vocs_NavigationMenu_link" style="--vocs_NavigationMenu_chevronDownIcon:url(/.vocs/icons/chevron-down.svg)" data-radix-collection-item="">Support</button></li></ul></div></nav></div><div class="vocs_DesktopTopNav_divider vocs_DesktopTopNav_hideCompact"></div></div></div><div class="vocs_MobileTopNav"><div class="vocs_MobileTopNav_section"><div class="vocs_MobileTopNav_group"><div class="vocs_MobileTopNav_logo"><a style="align-items:center;display:flex;height:100%" href="/"><img alt="Logo" class="vocs_NavLogo_logoImage vocs_Logo vocs_Logo_logoDark" src="/img/sequence-composite-dark.svg"/><img alt="Logo" class="vocs_NavLogo_logoImage vocs_Logo vocs_Logo_logoLight" src="/img/sequence-composite-light.svg"/></a></div></div><div class="vocs_MobileTopNav_group"><nav aria-label="Main" data-orientation="horizontal" dir="ltr" class="vocs_MobileTopNav_navigation vocs_NavigationMenu"><div style="position:relative"><ul data-orientation="horizontal" class="vocs_NavigationMenu_list" dir="ltr"><li class="vocs_MobileTopNav_item vocs_NavigationMenu_item"><button id="radix-:Rcpj:-trigger-radix-:R3cpj:" data-state="closed" aria-expanded="false" aria-controls="radix-:Rcpj:-content-radix-:R3cpj:" data-active="false" class="vocs_NavigationMenu_trigger vocs_NavigationMenu_link" style="--vocs_NavigationMenu_chevronDownIcon:url(/.vocs/icons/chevron-down.svg)" data-radix-collection-item="">Solutions</button></li><li class="vocs_MobileTopNav_item vocs_NavigationMenu_item"><button id="radix-:Rcpj:-trigger-radix-:R5cpj:" data-state="closed" aria-expanded="false" aria-controls="radix-:Rcpj:-content-radix-:R5cpj:" data-active="false" class="vocs_NavigationMenu_trigger vocs_NavigationMenu_link" style="--vocs_NavigationMenu_chevronDownIcon:url(/.vocs/icons/chevron-down.svg)" data-radix-collection-item="">Resources</button></li><li class="vocs_MobileTopNav_item vocs_NavigationMenu_item"><button id="radix-:Rcpj:-trigger-radix-:R7cpj:" data-state="closed" aria-expanded="false" aria-controls="radix-:Rcpj:-content-radix-:R7cpj:" data-active="false" class="vocs_NavigationMenu_trigger vocs_NavigationMenu_link" style="--vocs_NavigationMenu_chevronDownIcon:url(/.vocs/icons/chevron-down.svg)" data-radix-collection-item="">SDKs</button></li><li class="vocs_MobileTopNav_item vocs_NavigationMenu_item"><button id="radix-:Rcpj:-trigger-radix-:R9cpj:" data-state="closed" aria-expanded="false" aria-controls="radix-:Rcpj:-content-radix-:R9cpj:" data-active="false" class="vocs_NavigationMenu_trigger vocs_NavigationMenu_link" style="--vocs_NavigationMenu_chevronDownIcon:url(/.vocs/icons/chevron-down.svg)" data-radix-collection-item="">APIs</button></li><li class="vocs_MobileTopNav_item vocs_NavigationMenu_item"><button id="radix-:Rcpj:-trigger-radix-:Rbcpj:" data-state="closed" aria-expanded="false" aria-controls="radix-:Rcpj:-content-radix-:Rbcpj:" data-active="false" class="vocs_NavigationMenu_trigger vocs_NavigationMenu_link" style="--vocs_NavigationMenu_chevronDownIcon:url(/.vocs/icons/chevron-down.svg)" data-radix-collection-item="">Support</button></li></ul></div></nav><div class="vocs_MobileTopNav_navigation vocs_MobileTopNav_navigation_compact"></div></div></div><div class="vocs_MobileTopNav_section"><div class="vocs_MobileTopNav_group" style="margin-right:-8px"><button class="vocs_MobileSearch_searchButton" type="button" aria-label="Search" aria-haspopup="dialog" aria-expanded="false" aria-controls="radix-:R39j:" data-state="closed"><svg width="21" height="21" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M10 6.5C10 8.433 8.433 10 6.5 10C4.567 10 3 8.433 3 6.5C3 4.567 4.567 3 6.5 3C8.433 3 10 4.567 10 6.5ZM9.30884 10.0159C8.53901 10.6318 7.56251 11 6.5 11C4.01472 11 2 8.98528 2 6.5C2 4.01472 4.01472 2 6.5 2C8.98528 2 11 4.01472 11 6.5C11 7.56251 10.6318 8.53901 10.0159 9.30884L12.8536 12.1464C13.0488 12.3417 13.0488 12.6583 12.8536 12.8536C12.6583 13.0488 12.3417 13.0488 12.1464 12.8536L9.30884 10.0159Z" fill="currentColor" fill-rule="evenodd" clip-rule="evenodd"></path></svg></button></div></div></div></div><div class="vocs_DocsLayout_gutterTopCurtain vocs_DocsLayout_gutterTopCurtain_withSidebar"><div class="vocs_DesktopTopNav_curtain"></div><div class="vocs_MobileTopNav_curtain"><div class="vocs_MobileTopNav_curtainGroup"><div class="vocs_MobileTopNav_curtainItem"><button type="button" aria-haspopup="dialog" aria-expanded="false" aria-controls="radix-:Rqj:" data-state="closed" class="vocs_MobileTopNav_menuTrigger"><div aria-label="Menu" class="vocs_Icon" role="img" style="--vocs_Icon_size:13px"><svg width="100%" height="100%" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 79 48" fill="none"><title>Menu</title><path fill="currentColor" d="M19.528 47.232h40.87c1.952 0 3.515-1.562 3.515-3.564a3.5 3.5 0 0 0-3.516-3.516H19.528a3.501 3.501 0 0 0-3.515 3.516c0 2.002 1.562 3.564 3.515 3.564ZM12.057 27.262h55.81a3.501 3.501 0 0 0 3.516-3.516 3.501 3.501 0 0 0-3.515-3.515h-55.81a3.501 3.501 0 0 0-3.516 3.515 3.501 3.501 0 0 0 3.515 3.516ZM4.391 7.34H75.29c2.002 0 3.515-1.563 3.515-3.516 0-2.002-1.513-3.564-3.515-3.564H4.39C2.438.26.876 1.822.876 3.824A3.501 3.501 0 0 0 4.39 7.34Z"></path></svg></div><div class="vocs_MobileTopNav_menuTitle">Build a Backend Transaction Service</div></button></div></div><div class="vocs_MobileTopNav_curtainGroup"><div class="vocs_MobileTopNav_curtainItem"><button type="button" aria-haspopup="dialog" aria-expanded="false" aria-controls="radix-:R5aj:" data-state="closed" class="vocs_MobileTopNav_outlineTrigger">On this page<div aria-label="On this page" class="vocs_Icon" role="img" style="--vocs_Icon_size:10px"><svg width="100%" height="100%" viewBox="0 0 39 69" fill="none" xmlns="http://www.w3.org/2000/svg"><title>Chevron Right</title><path d="M38.8697 34.7461C38.8697 33.6719 38.4791 32.6953 37.649 31.8652L7.47318 1.8848C6.74078 1.1035 5.76418 0.712891 4.64118 0.712891C2.34618 0.712891 0.588379 2.42189 0.588379 4.71679C0.588379 5.79099 1.07668 6.81639 1.76028 7.59769L29.0552 34.7461L1.76028 61.8945C1.07668 62.6758 0.588379 63.6523 0.588379 64.7754C0.588379 67.0703 2.34618 68.7793 4.64118 68.7793C5.76418 68.7793 6.74078 68.3887 7.47318 67.6074L37.649 37.627C38.4791 36.7969 38.8697 35.8203 38.8697 34.7461Z" fill="currentColor"></path></svg></div></button></div></div></div></div><div class="vocs_DocsLayout_gutterRight vocs_DocsLayout_gutterRight_withSidebar"></div><div id="vocs-content" class="vocs_DocsLayout_content vocs_DocsLayout_content_withSidebar vocs_DocsLayout_content_withTopNav"><article class="vocs_Content"><header class="vocs_Header"><h1 class="vocs_H1 vocs_Heading"><div id="building-a-relaying-transaction-server" class="vocs_Heading_slugTarget"></div>Building a Relaying Transaction Server<a class="vocs_Anchor vocs_Autolink" aria-hidden="true" tabindex="-1" href="/guides/building-relaying-server#building-a-relaying-transaction-server"><div data-autolink-icon="true" class="vocs_Div vocs_AutolinkIcon" style="--vocs_AutolinkIcon_iconUrl:url(/.vocs/icons/link.svg)"></div></a></h1></header>
<p class="vocs_Paragraph">With Sequence, you can create a smart contract wallet your server can use to dispatch transactions for your users
without you having to be worried about transaction speed, throughput and re-orgs.</p>
<p class="vocs_Paragraph">The only difference from using a typical Sequence wallet when sending transactions to the blockchain, is at the smart contract level the <code class="vocs_Code">msg.sender</code> is one of the Sequence Relayers wallet addresses. For Sequence Builder standard contracts, this is not a problem when combined with a relayed Transactions API request.</p>
<aside class="vocs_Callout vocs_Callout_info"><p class="vocs_Paragraph">By default, Sequence transactions will be executed sequentially.</p></aside>
<p class="vocs_Paragraph">The following steps will guide you through how to create you server and mint collectibles to a wallet address:</p>
<ol class="vocs_List vocs_List_ordered">
<li class="vocs_ListItem"><a class="vocs_Anchor vocs_Link vocs_Link_accent_underlined" href="/guides/building-relaying-server#environment-setup-with-express-server">Environment Setup with Express Server</a>: Create a NodeJs based server using the library Express to accept HTTP requests</li>
<li class="vocs_ListItem"><a class="vocs_Anchor vocs_Link vocs_Link_accent_underlined" href="/guides/building-relaying-server#project--access-key-management">Project &amp; Access Key Management</a>: Claim a public access key to interact with the Sequence stack</li>
<li class="vocs_ListItem"><a class="vocs_Anchor vocs_Link vocs_Link_accent_underlined" href="/guides/building-relaying-server#deploy-collectible-contract">Deploy Collectible Contract</a>: Deploy a collectible contract in order to be able to submit transactions to the blockchain to mint tokens to a wallet address</li>
<li class="vocs_ListItem"><a class="vocs_Anchor vocs_Link vocs_Link_accent_underlined" href="/guides/building-relaying-server#construct-sponsored-relayer-with-the-transactions-api">Construct Sponsored Relayer with Transactions API</a>: Craft a function to be used in an Express route to call the Sequence Transactions API from a sponsored contract</li>
</ol>
<p class="vocs_Paragraph">Additonal Features:</p>
<ul class="vocs_List vocs_List_unordered">
<li class="vocs_ListItem"><a class="vocs_Anchor vocs_Link vocs_Link_accent_underlined" href="/guides/building-relaying-server">(Optional) Relay with Wallet Owned Currency</a>: Craft a function to be used in an Express route to call the Sequence Transactions API paid for using a wallet owned currency</li>
<li class="vocs_ListItem"><a class="vocs_Anchor vocs_Link vocs_Link_accent_underlined" href="/guides/building-relaying-server">(Optional) Relay Parallel Transactions</a>: Perform transaction batching to send a currency</li>
</ul>
<div class="vocs_Steps"><div class="vocs_Step"><h2 class="vocs_Step_title vocs_H2 vocs_Heading"><div id="environment-setup-with-express-server" class="vocs_Heading_slugTarget"></div>Environment Setup with Express Server<a class="vocs_Anchor vocs_Autolink" aria-hidden="true" tabindex="-1" href="/guides/building-relaying-server#environment-setup-with-express-server"><div data-autolink-icon="true" class="vocs_Div vocs_AutolinkIcon" style="--vocs_AutolinkIcon_iconUrl:url(/.vocs/icons/link.svg)"></div></a></h2><div class="vocs_Step_content"><p class="vocs_Paragraph">Ensure that <code class="vocs_Code">pnpm</code> (or some other node package manager) is installed with the following command:</p><div class="vocs_CodeBlock"><div class="vocs_Pre_wrapper"><pre style="background-color:#fff;--shiki-dark-bg:#22272e;color:#24292e;--shiki-dark:#adbac7" tabindex="0" class="shiki shiki-themes github-light github-dark-dimmed vocs_Pre"><code class="vocs_Code"><span class="line vocs_Span"><span style="color:#6F42C1;--shiki-dark:#F69D50" class="vocs_Span">curl</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> -fsSL</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span"> https://get.pnpm.io/install.sh</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> |</span><span style="color:#6F42C1;--shiki-dark:#F69D50" class="vocs_Span"> sh</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span"> -</span></span></code></pre></div></div><p class="vocs_Paragraph">Then, clone down the <a class="vocs_Anchor vocs_Link vocs_Link_accent_underlined vocs_ExternalLink" href="https://github.com/0xsequence-demos/template-node-transactions-backend/tree/template-starter" target="_blank" rel="noopener noreferrer" style="--vocs_ExternalLink_iconUrl:url(/.vocs/icons/arrow-diagonal.svg)">following express template code</a></p><aside class="vocs_Callout vocs_Callout_info"><p class="vocs_Paragraph">Express is a minimal and flexible Node.js web application framework that provides a robust set of features for web and mobile applications, which will be used in this guide.</p></aside><p class="vocs_Paragraph">After the code is locally on your machine, run your server and client with the following command:</p><div class="vocs_CodeBlock"><div class="vocs_Pre_wrapper"><pre style="background-color:#fff;--shiki-dark-bg:#22272e;color:#24292e;--shiki-dark:#adbac7" tabindex="0" class="shiki shiki-themes github-light github-dark-dimmed vocs_Pre"><code class="vocs_Code"><span class="line vocs_Span"><span style="color:#6F42C1;--shiki-dark:#F69D50" class="vocs_Span">pnpm</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span"> run</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span"> start</span></span></code></pre></div></div><p class="vocs_Paragraph">Contained in the code is a route called <code class="vocs_Code">/mint</code> that can be called from the cli for testing.</p><p class="vocs_Paragraph">Give a try with this example curl request:</p><div class="vocs_CodeBlock"><div class="vocs_Pre_wrapper"><pre style="background-color:#fff;--shiki-dark-bg:#22272e;color:#24292e;--shiki-dark:#adbac7" tabindex="0" class="shiki shiki-themes github-light github-dark-dimmed vocs_Pre"><code class="vocs_Code"><span class="line vocs_Span"><span style="color:#6F42C1;--shiki-dark:#F69D50" class="vocs_Span">curl</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> -X</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span"> POST</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span"> http://localhost:3000/mint</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> -d</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span"> &#x27;{&quot;tokenID&quot;: 0, &quot;address&quot;: &quot;0x&quot;}&#x27;</span></span></code></pre></div></div><p class="vocs_Paragraph">You should see the following output:</p><div class="vocs_CodeBlock"><div class="vocs_Pre_wrapper"><pre style="background-color:#fff;--shiki-dark-bg:#22272e;color:#24292e;--shiki-dark:#adbac7" tabindex="0" class="shiki shiki-themes github-light github-dark-dimmed vocs_Pre"><code class="vocs_Code"><span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">{</span><span style="color:#6F42C1;--shiki-dark:#F69D50" class="vocs_Span">&quot;txHash&quot;</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">:</span><span style="color:#6F42C1;--shiki-dark:#F69D50" class="vocs_Span">&quot;0x&quot;</span><span style="color:#6F42C1;--shiki-dark:#F69D50" class="vocs_Span">}</span></span></code></pre></div></div></div></div><div class="vocs_Step"><h2 class="vocs_Step_title vocs_H2 vocs_Heading"><div id="project--access-key-management" class="vocs_Heading_slugTarget"></div>Project &amp; Access Key Management<a class="vocs_Anchor vocs_Autolink" aria-hidden="true" tabindex="-1" href="/guides/building-relaying-server#project--access-key-management"><div data-autolink-icon="true" class="vocs_Div vocs_AutolinkIcon" style="--vocs_AutolinkIcon_iconUrl:url(/.vocs/icons/link.svg)"></div></a></h2><div class="vocs_Step_content"><p class="vocs_Paragraph">First start by following <a class="vocs_Anchor vocs_Link vocs_Link_accent_underlined" href="/solutions/builder/project-management">this walkthrough</a> for how to sign up to the <a class="vocs_Anchor vocs_Link vocs_Link_accent_underlined vocs_ExternalLink" href="https://sequence.build/" target="_blank" rel="noopener noreferrer" style="--vocs_ExternalLink_iconUrl:url(/.vocs/icons/arrow-diagonal.svg)">Sequence Builder</a> and to learn how to create a project.</p><p class="vocs_Paragraph">Then, in order to use the Transactions API, you&#x27;ll need to upgrade your Billing to <code class="vocs_Code">Developer</code> which can be with <a class="vocs_Anchor vocs_Link vocs_Link_accent_underlined" href="/solutions/builder/project-settings#5-billing-settings">this walkthrough</a>.</p><p class="vocs_Paragraph">Finally, a <code class="vocs_Code">Public Access Key</code> is required for the Transactions API, which can be acquired following <a class="vocs_Anchor vocs_Link vocs_Link_accent_underlined" href="/solutions/builder/getting-started#claim-an-api-access-key">this walkthough</a>.</p><p class="vocs_Paragraph">Finally update the update the <code class="vocs_Code">.env.example</code> to <code class="vocs_Code">.env</code> with the following:</p><div class="vocs_CodeBlock"><div class="vocs_Pre_wrapper"><pre style="background-color:#fff;--shiki-dark-bg:#22272e;color:#24292e;--shiki-dark:#adbac7" tabindex="0" class="shiki shiki-themes github-light github-dark-dimmed vocs_Pre"><code class="vocs_Code"><span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">CHAIN_HANDLE</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">=</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">&#x27;&lt;CHAIN_HANDLE&gt;&#x27;</span><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span"> # e.g. `mainnet`, `xr-sepolia`, etc.</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">PROJECT_ACCESS_KEY</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">=</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">&#x27;&lt;PUBlIC_ACCESS_KEY&gt;&#x27;</span></span></code></pre></div></div></div></div><div class="vocs_Step"><h2 class="vocs_Step_title vocs_H2 vocs_Heading"><div id="deploy-collectible-contract" class="vocs_Heading_slugTarget"></div>Deploy Collectible Contract<a class="vocs_Anchor vocs_Autolink" aria-hidden="true" tabindex="-1" href="/guides/building-relaying-server#deploy-collectible-contract"><div data-autolink-icon="true" class="vocs_Div vocs_AutolinkIcon" style="--vocs_AutolinkIcon_iconUrl:url(/.vocs/icons/link.svg)"></div></a></h2><div class="vocs_Step_content"><p class="vocs_Paragraph">Follow <a class="vocs_Anchor vocs_Link vocs_Link_accent_underlined" href="/solutions/collectibles/contracts/deploy-an-item-collection">this walkthrough</a> to deploy a collectible contract.</p><aside class="vocs_Callout vocs_Callout_info"><p class="vocs_Paragraph">If you&#x27;re using a non-testnet and need to sponsor your contract, you can perform this action by following <a class="vocs_Anchor vocs_Link vocs_Link_accent_underlined" href="/guides/building-relaying-server">this walkthrough</a></p></aside><p class="vocs_Paragraph">Finally, update the <code class="vocs_Code">.env</code> with your deployed collectible contract:</p><div class="vocs_CodeBlock"><div class="vocs_Pre_wrapper"><pre style="background-color:#fff;--shiki-dark-bg:#22272e;color:#24292e;--shiki-dark:#adbac7" tabindex="0" class="shiki shiki-themes github-light github-dark-dimmed vocs_Pre"><code class="vocs_Code"><span class="line vocs_Span"><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">...</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">COLLECTIBLE_CONTRACT_ADDRESS</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">=</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">&quot;&lt;ADDRESS&gt;&quot;</span></span></code></pre></div></div></div></div><div class="vocs_Step"><h2 class="vocs_Step_title vocs_H2 vocs_Heading"><div id="construct-sponsored-relayer-with-the-transactions-api" class="vocs_Heading_slugTarget"></div>Construct Sponsored Relayer with the Transactions API<a class="vocs_Anchor vocs_Autolink" aria-hidden="true" tabindex="-1" href="/guides/building-relaying-server#construct-sponsored-relayer-with-the-transactions-api"><div data-autolink-icon="true" class="vocs_Div vocs_AutolinkIcon" style="--vocs_AutolinkIcon_iconUrl:url(/.vocs/icons/link.svg)"></div></a></h2><div class="vocs_Step_content"><aside class="vocs_Callout vocs_Callout_info"><p class="vocs_Paragraph">The full code for this section can be found <a class="vocs_Anchor vocs_Link vocs_Link_accent_underlined vocs_ExternalLink" href="https://github.com/0xsequence-demos/template-node-transactions-backend" target="_blank" rel="noopener noreferrer" style="--vocs_ExternalLink_iconUrl:url(/.vocs/icons/arrow-diagonal.svg)">here</a></p></aside><p class="vocs_Paragraph">First, using the template code provided in step #1, we&#x27;ll need to add a few packages</p><div class="vocs_CodeBlock"><div class="vocs_Pre_wrapper"><pre style="background-color:#fff;--shiki-dark-bg:#22272e;color:#24292e;--shiki-dark:#adbac7" tabindex="0" class="shiki shiki-themes github-light github-dark-dimmed vocs_Pre"><code class="vocs_Code"><span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">import</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> { Session } </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">from</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span"> &#x27;@0xsequence/auth&#x27;</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">import</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> { findSupportedNetwork, NetworkConfig } </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">from</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span"> &#x27;@0xsequence/network&#x27;</span></span></code></pre></div></div><p class="vocs_Paragraph">Then, your server will need an EOA wallet that will be able to sign messages. It will be the owner of your server-side Sequence
wallet which will be used to dispatch transactions.</p><aside class="vocs_Callout vocs_Callout_warning"><p class="vocs_Paragraph">Openning a session may trigger a migration of your Sequence wallet to a new version, this could be <code class="vocs_Code">v1</code> to <code class="vocs_Code">v2</code> or <code class="vocs_Code">v2</code> to future versions.</p><p class="vocs_Paragraph">Migration is a one-way process, once your wallet is migrated it cannot be reverted to a previous version.</p><p class="vocs_Paragraph">To catch any unwanted migration, you can use the <code class="vocs_Code">onMigration</code> callback.</p></aside><p class="vocs_Paragraph">To implement the <code class="vocs_Code">callContract</code> function, include the following code that uses a single signer to relay transactions:</p><div class="vocs_CodeBlock"><div class="vocs_Pre_wrapper"><pre style="background-color:#fff;--shiki-dark-bg:#22272e;color:#24292e;--shiki-dark:#adbac7" tabindex="0" class="shiki shiki-themes github-light github-dark-dimmed vocs_Pre"><code class="vocs_Code"><span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">const</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span"> callContract</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> =</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> async</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> (</span><span style="color:#E36209;--shiki-dark:#F69D50" class="vocs_Span">address</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">:</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> string</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">, </span><span style="color:#E36209;--shiki-dark:#F69D50" class="vocs_Span">tokenID</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">:</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> number</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">)</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">:</span><span style="color:#6F42C1;--shiki-dark:#F69D50" class="vocs_Span"> Promise</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">&lt;</span><span style="color:#6F42C1;--shiki-dark:#F69D50" class="vocs_Span">ethers</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">.</span><span style="color:#6F42C1;--shiki-dark:#F69D50" class="vocs_Span">providers</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">.</span><span style="color:#6F42C1;--shiki-dark:#F69D50" class="vocs_Span">TransactionResponse</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">&gt; </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">=&gt;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> {</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">	</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">	const</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> chainConfig</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">:</span><span style="color:#6F42C1;--shiki-dark:#F69D50" class="vocs_Span"> NetworkConfig</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> =</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span"> findSupportedNetwork</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(process.env.</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">CHAIN_HANDLE</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">!</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">)</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">!</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">	const</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> provider</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> =</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> new</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> ethers.providers.</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">StaticJsonRpcProvider</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">({</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">		url: chainConfig.rpcUrl</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">	})</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">	const</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> walletEOA</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> =</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> new</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> ethers.</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">Wallet</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(process.env.</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">PKEY</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">!</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">, provider);</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">	const</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> relayerUrl</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> =</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span"> `https://{</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">chainConfig</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">.</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">name</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">}-relayer.sequence.app`</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">	// Create a single signer sequence wallet session</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">	const</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> session</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> =</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> await</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> Session.</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">singleSigner</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">({</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">		signer: walletEOA,</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">		projectAccessKey: process.env.</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">PROJECT_ACCESS_KEY</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">!</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">	})</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">	const</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> signer</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> =</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> session.account.</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">getSigner</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(chainConfig.chainId)</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">	</span></span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">	// Standard interface for ERC1155 contract deployed via Sequence Builder</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">	const</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> collectibleInterface</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> =</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> new</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> ethers.utils.</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">Interface</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">([</span></span>
<span class="line vocs_Span"><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">		&#x27;function mint(address to, uint256 tokenId, uint256 amount, bytes data)&#x27;</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">	])</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">		</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">	const</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> data</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> =</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> collectibleInterface.</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">encodeFunctionData</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(</span></span>
<span class="line vocs_Span"><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">		&#x27;mint&#x27;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">, [</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">`${</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">address</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">}`</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">, </span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">`${</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">tokenID</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">}`</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">, </span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">&quot;1&quot;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">, </span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">&quot;0x00&quot;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">]</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">	)</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">	const</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> txn</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> =</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> {</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">		to: process.env.</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">COLLECTIBLE_CONTRACT_ADDRESS</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">, </span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">		data: data</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">	}</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">	try</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> {</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">		return</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> await</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> signer.</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">sendTransaction</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(txn)</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">	} </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">catch</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> (err) {</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">		console.</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">error</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">`ERROR: ${</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">err</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">}`</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">)</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">		throw</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> err</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">	}</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">}</span></span></code></pre></div></div><p class="vocs_Paragraph">Finally, update the <code class="vocs_Code">.env</code> with a private key for a wallet that can be generated from the <a class="vocs_Anchor vocs_Link vocs_Link_accent_underlined vocs_ExternalLink" href="https://sequence-ethauthproof-viewer.vercel.app/" target="_blank" rel="noopener noreferrer" style="--vocs_ExternalLink_iconUrl:url(/.vocs/icons/arrow-diagonal.svg)">following app</a> which is used for demo purposes. For production, we recommend to generate private keys securely locally on your computer via <a class="vocs_Anchor vocs_Link vocs_Link_accent_underlined vocs_ExternalLink" href="https://github.com/0xsequence-demos/script-generate-evm-private-key" target="_blank" rel="noopener noreferrer" style="--vocs_ExternalLink_iconUrl:url(/.vocs/icons/arrow-diagonal.svg)">this example script</a>.</p><p class="vocs_Paragraph">Then, update the <code class="vocs_Code">PKEY</code> variable with the key:</p><div class="vocs_CodeBlock"><div class="vocs_Pre_wrapper"><pre style="background-color:#fff;--shiki-dark-bg:#22272e;color:#24292e;--shiki-dark:#adbac7" tabindex="0" class="shiki shiki-themes github-light github-dark-dimmed vocs_Pre"><code class="vocs_Code"><span class="line vocs_Span"><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">...</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">PKEY</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">=</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">&#x27;&lt;WALLET_PRIVATE_KEY&gt;&#x27;</span></span></code></pre></div></div><h3 class="vocs_H3 vocs_Heading"><div id="grant-minter-role-to-relayer-wallet-address" class="vocs_Heading_slugTarget"></div>Grant Minter Role to Relayer Wallet Address<a class="vocs_Anchor vocs_Autolink" aria-hidden="true" tabindex="-1" href="/guides/building-relaying-server#grant-minter-role-to-relayer-wallet-address"><div data-autolink-icon="true" class="vocs_Div vocs_AutolinkIcon" style="--vocs_AutolinkIcon_iconUrl:url(/.vocs/icons/link.svg)"></div></a></h3><p class="vocs_Paragraph">One must update the role access of the contract in the Builder to only receive requests from the minter wallet address.</p><p class="vocs_Paragraph">You can do this in Sequence Builder by providing <code class="vocs_Code">minter permission</code> to your <code class="vocs_Code">Sequence Wallet Transactions API Address</code>.</p><p class="vocs_Paragraph">To do so, open your project, navigate to the <code class="vocs_Code">Contracts</code> page, select your <code class="vocs_Code">Linked contracts</code> and under <code class="vocs_Code">Write Contract</code> tab expand the <code class="vocs_Code">grantRole</code> method.</p><p class="vocs_Paragraph">Complete with the following details:</p><p class="vocs_Paragraph"><code class="vocs_Code">bytes32 role</code>: <code class="vocs_Code">0x9f2df0fed2c77648de5860a4cc508cd0818c85b8b8a1ab4ceeef8d981c8956a6</code></p><p class="vocs_Paragraph"><code class="vocs_Code">address account</code>: <code class="vocs_Code">&lt;Generated Sequence Transactions API Wallet Address&gt;</code></p><img src="/img/relayer/grant_role.png" alt="Grant a role for the relayer"/><p class="vocs_Paragraph">Where the <code class="vocs_Code">role</code> string inputted is the result of <code class="vocs_Code">keccak256(&quot;MINTER_ROLE&quot;)</code> in solidity or <code class="vocs_Code">ethers.utils.keccak256(ethers.utils.toUtf8Bytes(&quot;MINTER_ROLE&quot;))</code> in javascript</p><p class="vocs_Paragraph">This makes it so that only your specific address can mint from the contract, it will error otherwise.</p><p class="vocs_Paragraph">Complete the role update by clicking <code class="vocs_Code">write</code> and sign the sponsored transaction.</p><p class="vocs_Paragraph">You application is now ready for you to send a test transaction from the client frontend by signing into your wallet and clicking mint.</p><p class="vocs_Paragraph">Give it a try!</p><aside class="vocs_Callout vocs_Callout_danger"><p class="vocs_Paragraph">Don&#x27;t forget to update the access key in the client in the <code class="vocs_Code">initWallet</code> function</p></aside></div></div></div>
<h2 class="vocs_H2 vocs_Heading"><div id="optional-relay-with-wallet-owned-currency" class="vocs_Heading_slugTarget"></div>(Optional) Relay with Wallet Owned Currency<a class="vocs_Anchor vocs_Autolink" aria-hidden="true" tabindex="-1" href="/guides/building-relaying-server#optional-relay-with-wallet-owned-currency"><div data-autolink-icon="true" class="vocs_Div vocs_AutolinkIcon" style="--vocs_AutolinkIcon_iconUrl:url(/.vocs/icons/link.svg)"></div></a></h2>
<p class="vocs_Paragraph">You can also enforce a specific way to pay for gas fees:</p>
<div class="vocs_CodeBlock"><div class="vocs_Pre_wrapper"><pre style="background-color:#fff;--shiki-dark-bg:#22272e;color:#24292e;--shiki-dark:#adbac7" tabindex="0" class="shiki shiki-themes github-light github-dark-dimmed vocs_Pre"><code class="vocs_Code"><span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">import</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> { Session } </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">from</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span"> &#x27;@0xsequence/auth&#x27;</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">import</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> { ethers } </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">from</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span"> &#x27;ethers&#x27;</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">// where the &lt;chain_handle&gt; corresponds to https://docs.sequence.xyz/solutions/technical-references/chain-support/</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">const</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> provider</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> =</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> new</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> ethers.providers.</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">JsonRpcProvider</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">&#x27;https://nodes.sequence.app/&lt;chain_handle&gt;&#x27;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">);</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">// Create your server EOA</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">const</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> walletEOA</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> =</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> new</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> ethers.</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">Wallet</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(serverPrivateKey, provider)</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">// Open a Sequence session, this will find or create</span></span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">// a Sequence wallet controlled by your server EOA</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">const</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> session</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> =</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> await</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> Session.</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">singleSigner</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">({</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">  signer: walletEOA,</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">  projectAccessKey: </span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">&#x27;&lt;access_key&gt;&#x27;</span></span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">  // OPTIONAL: Multiple wallets could be found for the same EOA</span></span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">  // to enforce a specific wallet you can use the following callback</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">  selectWallet: </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">async</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> (</span><span style="color:#E36209;--shiki-dark:#F69D50" class="vocs_Span">wallets</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">:</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> string</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">[]) </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">=&gt;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> {</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">    const</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> found</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> =</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> wallets.</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">find</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(</span><span style="color:#E36209;--shiki-dark:#F69D50" class="vocs_Span">w</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> =&gt;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> w </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">===</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> EXPECTED_WALLET_ADDRESS</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">)</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">    if</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> (</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">!</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">found) </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">throw</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span"> Error</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">&#x27;wallet not found&#x27;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">)</span></span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">    // Returning the wallet address will make the session use it</span></span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">    // returning undefined will make the session create a new wallet</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">    return</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> found</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">  }</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">})</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">const</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> signer</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> =</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> session.account.</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">getSigner</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">137</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">, {</span></span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">  // OPTIONAL: You can also enforce a specific way to pay for gas fees</span></span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">  // if not provided the sdk will select one for you</span></span>
<span class="line vocs_Span"><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">  selectFee</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">: </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">async</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> (</span></span>
<span class="line vocs_Span"><span style="color:#E36209;--shiki-dark:#F69D50" class="vocs_Span">    _txs</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">:</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> any</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">,</span></span>
<span class="line vocs_Span"><span style="color:#E36209;--shiki-dark:#F69D50" class="vocs_Span">    options</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">:</span><span style="color:#6F42C1;--shiki-dark:#F69D50" class="vocs_Span"> FeeOption</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">[]</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">  ) </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">=&gt;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> {</span></span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">    // Find the option to pay with native tokens</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">    const</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> found</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> =</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> options.</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">find</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(</span><span style="color:#E36209;--shiki-dark:#F69D50" class="vocs_Span">o</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> =&gt;</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> !</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">o.token.contractAddress)</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">    if</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> (</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">!</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">found) </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">throw</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span"> Error</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">&#x27;fee option not found&#x27;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">)</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">    return</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> found</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">  }</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">})</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">// Initialize the contract</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">const</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> usdc</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> =</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> new</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> ethers.</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">Contract</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(</span></span>
<span class="line vocs_Span"><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">  &#x27;0x2791bca1f2de4661ed88a30c99a7a9449aa84174&#x27;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">, </span><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">// USDC on Polygon</span></span>
<span class="line vocs_Span"><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">  ERC_20_ABI</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">,</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">  signer</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">)</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">// Send the transaction</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">const</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> txnResponse</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> =</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> await</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> usdc.</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">transfer</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(recipient, </span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">1</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">)</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">// Check if transaction was successful</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">if</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> (txnReceipt.status </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">!=</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> 1</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">) {</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">  console.</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">log</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">`Unexpected status: ${</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">txnReceipt</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">.</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">status</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">}`</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">)</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">}</span></span></code></pre></div></div>
<h2 class="vocs_H2 vocs_Heading"><div id="optional-relay-parallel-transactions" class="vocs_Heading_slugTarget"></div>(Optional) Relay Parallel Transactions<a class="vocs_Anchor vocs_Autolink" aria-hidden="true" tabindex="-1" href="/guides/building-relaying-server#optional-relay-parallel-transactions"><div data-autolink-icon="true" class="vocs_Div vocs_AutolinkIcon" style="--vocs_AutolinkIcon_iconUrl:url(/.vocs/icons/link.svg)"></div></a></h2>
<p class="vocs_Paragraph">If you want to send multiple independent transactions without needing to batch them, you can also send them in distinct nonce spaces.</p>
<p class="vocs_Paragraph">Using distinct nonce spaces for your transactions signals to the transactions API that there&#x27;s no dependency between them and that
they can be executed on-chain in any order.</p>
<p class="vocs_Paragraph">This allows the transactions to be dispatched immediately in an unbuffered way without having to wait for a full batch.</p>
<p class="vocs_Paragraph">Here is an example of how to do that:</p>
<div class="vocs_CodeBlock"><div class="vocs_Pre_wrapper"><pre style="background-color:#fff;--shiki-dark-bg:#22272e;color:#24292e;--shiki-dark:#adbac7" tabindex="0" class="shiki shiki-themes github-light github-dark-dimmed vocs_Pre"><code class="vocs_Code"><span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">// Generate random nonce spaces with ~0% probability of collision</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">const</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> randomNonceSpace1</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> =</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> ethers.BigNumber.</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">from</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">  ethers.utils.</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">hexlify</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(ethers.utils.</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">randomBytes</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">20</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">))</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">);</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">const</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> randomNonceSpace2</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> =</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> ethers.BigNumber.</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">from</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">  ethers.utils.</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">hexlify</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(ethers.utils.</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">randomBytes</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">20</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">))</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">);</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">// Create signers for each nonce space</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">const</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> signer1</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> =</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> session.account.</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">getSigner</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">137</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">, {</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">  nonceSpace: randomNonceSpace1,</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">});</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">const</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> signer2</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> =</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> session.account.</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">getSigner</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">137</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">, {</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">  nonceSpace: randomNonceSpace2,</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">});</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">// Generate transactions</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">const</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> txn1</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> =</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> {</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">  to: tokenContract.address,</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">  data: erc20Interface.</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">encodeFunctionData</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">&quot;transfer&quot;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">, [recipient1, amount1]),</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">};</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">const</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> txn2</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> =</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> {</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">  to: tokenContract.address,</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">  data: erc20Interface.</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">encodeFunctionData</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">&quot;transfer&quot;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">, [recipient2, amount2]),</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">};</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">// Dispatch transactions, which can now be executed in parallel</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">await</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> Promise</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">.</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">all</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">([</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">  signer1.</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">sendTransaction</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(txn1),</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">  signer2.</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">sendTransaction</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(txn2),</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">]);</span></span></code></pre></div></div>
<p class="vocs_Paragraph">If batching transactions is not a problem for your use-case, you can call <code class="vocs_Code">await wallet.sendTransaction(txns)</code>.
You can read more about batch transactions in <a class="vocs_Anchor vocs_Link vocs_Link_accent_underlined" href="/solutions/wallets/universal-wallet/examples/send-batch-transactions">Sending Batched Transactions</a>.</p></article><footer class="vocs_Footer"><div class="vocs_Footer_container"></div><div></div></footer></div><div data-bottom-observer="true"></div></div></div>
  </body>
</html>
