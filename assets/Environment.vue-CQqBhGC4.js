import{d as w,r as f,c as H,L as z,V as c,W as k,a2 as g,F as V,a9 as A,X as b,a0 as h,H as u,Z as _,ad as D,a5 as X,a6 as Y,Y as m,_ as Z,aJ as M,ab as x,av as F,am as q,aR as P,al as Q,aO as N,l as ee,ag as le,ac as ae,aG as te,aa as oe,a7 as ne,cE as se,a4 as ue}from"./APIComponent-BYZOM-01.js";import{c as I,d as re,f as ce,u as ie,b as ve}from"./SidebarButton.vue-CozdbFc1.js";import{p as de,a as me}from"./SidebarListElement.vue-D3v9kruF.js";import{x as pe,a as fe}from"./ViewLayoutContent.vue-DjcXTq2h.js";import{m as Ce}from"./ScalarTextField.vue-C8hoKF32.js";import"./index-DwvO-7sM.js";const xe=["onClick"],be={key:1,class:"!py-0 flex flex-1 gap-2 items-center rounded"},ke=["placeholder"],R=w({__name:"EnvironmentColors",props:{activeColor:{}},emits:["select"],setup(y){const C=y,i=f(!1),l=f(""),t=f(null),v=[{color:"#8E8E8E"},{color:"#EF0006"},{color:"#EDBE20"},{color:"#069061"},{color:"#FB892C"},{color:"#0082D0"},{color:"#5203D1"},{color:"#FFC0CB"}],d=H(()=>C.activeColor&&!v.some(e=>e.color===C.activeColor)||l.value?`background-color: ${C.activeColor||l.value};`:"background: linear-gradient(to right, rgb(235, 87, 87), rgb(242, 201, 76), rgb(76, 183, 130), rgb(78, 167, 252), rgb(250, 96, 122));"),o=()=>{i.value=!i.value,M(()=>{t.value&&t.value.focus()})};return z(l,e=>{e&&!e.startsWith("#")&&(l.value=`#${e}`),i.value=!0}),(e,n)=>(c(),k("div",{class:Z(["flex flex-row gap-1.5 items-center justify-between space-x-1 min-h-10 min-w-[296px] py-1",i.value?"pl-2 pr-1.5":"px-2"])},[i.value?g("",!0):(c(),k(V,{key:0},[(c(),k(V,null,A(v,r=>b("div",{key:r.color,class:"flex h-5 w-5 cursor-pointer items-center justify-center rounded-full",style:D({backgroundColor:r.color}),onClick:E=>e.$emit("select",r.color)},[e.activeColor===r.color&&!l.value?(c(),h(u(_),{key:0,class:"text-c-btn",icon:"Checkmark",size:"xs"})):g("",!0)],12,xe)),64)),n[2]||(n[2]=b("hr",{class:"w-0.5 h-5 border-ghost border-l"},null,-1)),b("label",{class:"cursor-pointer flex flex-row justify-center h-5 w-5 gap-2 items-center rounded-full z-10",style:D(d.value),onClick:o},[!i.value&&(e.activeColor===l.value||e.activeColor&&!v.some(r=>r.color===e.activeColor))?(c(),h(u(_),{key:0,class:"text-c-btn",icon:"Checkmark",size:"xs"})):g("",!0)],4)],64)),i.value?(c(),k("div",be,[n[3]||(n[3]=b("span",{class:"absolute border border-dashed h-5 w-5 rounded-full"},null,-1)),b("span",{class:"h-5 w-5 rounded-full z-[1]",style:D(d.value)},null,4),X(b("input",{ref_key:"customColorInputRef",ref:t,"onUpdate:modelValue":n[0]||(n[0]=r=>l.value=r),class:"border-transparent flex-1 outline-none w-full text-sm",placeholder:e.activeColor||"#000000",type:"text",onInput:n[1]||(n[1]=r=>e.$emit("select",l.value))},null,40,ke),[[Y,l.value]]),b("button",{class:"text-c-3 hover:bg-b-2 p-1.5 rounded-lg",type:"button",onClick:o},[m(u(_),{icon:"Checkmark",size:"xs"})])])):g("",!0)],2))}}),he={class:"flex flex-col gap-4"},ye=w({__name:"EnvironmentColorModal",props:{state:{},selectedColor:{}},emits:["cancel","submit"],setup(y,{emit:C}){const i=y,l=C,t=f(""),v=d=>{t.value=d};return(d,o)=>(c(),h(u(F),{size:"xxs",state:d.state,title:"Edit Environment Color"},{default:x(()=>[b("div",he,[m(R,{activeColor:t.value||i.selectedColor,class:"p-1 w-full",onSelect:v},null,8,["activeColor"]),m(I,{onCancel:o[0]||(o[0]=e=>l("cancel")),onSubmit:o[1]||(o[1]=e=>l("submit",t.value))})])]),_:1},8,["state"]))}}),ge={class:"flex flex-col gap-3"},Ee=w({__name:"EnvironmentModal",props:{state:{}},emits:["cancel","submit"],setup(y,{emit:C}){const i=y,l=C,t=f(""),v=f("#8E8E8E"),d=o=>{v.value=o};return z(()=>i.state.open,o=>{o&&(t.value="",v.value="#8E8E8E")}),(o,e)=>(c(),h(u(F),{size:"xxs",state:o.state,title:"Add Environment"},{default:x(()=>[b("div",ge,[m(u(Ce),{modelValue:t.value,"onUpdate:modelValue":e[0]||(e[0]=n=>t.value=n),placeholder:"Environment name"},null,8,["modelValue"]),m(R,{activeColor:v.value,class:"p-3 w-full",onSelect:d},null,8,["activeColor"]),m(I,{onCancel:e[1]||(e[1]=n=>l("cancel")),onSubmit:e[2]||(e[2]=n=>l("submit",{name:t.value,color:v.value}))})])]),_:1},8,["state"]))}}),we={class:"flex-1"},_e=["value"],ze=w({__name:"Environment",props:{isApp:{type:Boolean}},setup(y){const C=q(),i=P(),{environments:l,environmentMutators:t,events:v}=Q(),d=N(),o=N(),e=f(null),n=f(null),r=f(!1),E=f(null),S=f("");function $(a){const s=se.parse({name:a.name,uid:ue(),color:a.color,value:JSON.stringify({exampleKey:"exampleValue"},null,2),isDefault:!1});t.add(s),e.value=s.uid,C.push(e.value),o.hide()}function j(a){e.value&&t.edit(e.value,"value",a)}const K=a=>{t.delete(a),e.value===a&&(e.value=null)},T=a=>{E.value=a,S.value=l[a].color||"",d.show()},U=a=>{E.value&&(t.edit(E.value,"color",a),d.hide())},J=()=>{C.currentRoute.value.params.environment==="default"&&(e.value=l.default.uid)},L=()=>{e.value&&!l[e.value].isDefault&&(r.value=!0,M(()=>{var a;(a=n.value)==null||a.focus()}))},O=a=>{const s=a.target.value;e.value&&!l[e.value].isDefault&&t.edit(e.value,"name",s)},B=a=>{a!=null&&a.createNew&&i.name==="environment"&&$({name:"",color:""})},W=()=>{o.show()};return ee(()=>{J(),v.hotKeys.on(B)}),le(()=>v.hotKeys.off(B)),(a,s)=>(c(),h(fe,null,{default:x(()=>[m(re,{title:"Environment"},{content:x(()=>[b("div",we,[m(de,null,{default:x(()=>[(c(!0),k(V,null,A(u(l),p=>(c(),h(me,{key:p.uid,class:"text-xs",variable:{name:p.name,uid:p.uid,color:p.color,isDefault:p.isDefault},warningMessage:"Are you sure you want to delete this environment?",onClick:G=>e.value=p.uid,onColorModal:T,onDelete:G=>K(p.uid)},null,8,["variable","onClick","onDelete"]))),128))]),_:1})])]),button:x(()=>[m(ce,{click:W,hotkey:"N",isApp:a.isApp},{title:x(()=>s[4]||(s[4]=[ae("Add Environment")])),_:1},8,["isApp"])]),_:1}),m(pe,{class:"flex-1"},{default:x(()=>[m(ie,null,te({default:x(()=>[e.value?(c(),h(ve,{key:0,class:"pl-px pr-2 md:px-2 py-2.5",language:"json",lineNumbers:"",modelValue:u(l)[e.value].value,"onUpdate:modelValue":j},null,8,["modelValue"])):g("",!0)]),_:2},[e.value?{name:"title",fn:x(()=>[!r.value||u(l)[e.value].isDefault?(c(),k("span",{key:0,onDblclick:L},oe(u(l)[e.value].name),33)):(c(),k("input",{key:1,ref_key:"nameInputRef",ref:n,class:"ring-1 ring-offset-4 ring-b-outline rounded",spellcheck:"false",type:"text",value:u(l)[e.value].name,onBlur:s[0]||(s[0]=p=>r.value=!1),onInput:O,onKeyup:s[1]||(s[1]=ne(p=>r.value=!1,["enter"]))},null,40,_e))]),key:"0"}:void 0]),1024)]),_:1}),m(ye,{selectedColor:S.value,state:u(d),onCancel:s[2]||(s[2]=p=>u(d).hide()),onSubmit:U},null,8,["selectedColor","state"]),m(Ee,{state:u(o),onCancel:s[3]||(s[3]=p=>u(o).hide()),onSubmit:$},null,8,["state"])]),_:1}))}});export{ze as default};
