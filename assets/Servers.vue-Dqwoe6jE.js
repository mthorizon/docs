import{d as C,g as j}from"./SidebarButton.vue-dQ9tGnP9.js";import{a as L,b as N}from"./SidebarListElement.vue-Co_DksL4.js";import{x as U,a as F}from"./ViewLayoutContent.vue-BYXVPZPt.js";import{d as V,al as g,aV as O,c as b,U as u,V as h,F as $,X as o,$ as _,a1 as S,am as R,ab as s,H as k,ac as w,W as E,a9 as M,b4 as A}from"./APIComponent-Cy-fCHb4.js";import{E as y}from"./Form.vue-BbAq1jNZ.js";import"./index-BkD49clb.js";import"./DataTableInput.vue-DAr2AbUA.js";const G={class:"w-full"},H=V({__name:"ServerForm",setup(B){const{activeCollection:t,servers:p,serverMutators:v}=g(),f=[{label:"URL",key:"url",placeholder:"https://void.scalar.com/api"},{label:"Label",key:"description",placeholder:"Production"}],d=O(),r=b(()=>{var e,a;return p[t.value&&d.params.server==="default"?(e=t.value)==null?void 0:e.servers[0]:((a=t.value)==null?void 0:a.servers.find(l=>l===d.params.server))??""]}),c=(e,a)=>{t.value&&v.edit(r.value.uid,e,a)},m=(e,a)=>{t.value&&v.edit(r.value.uid,`variables.${e}.value`,a)},n=b(()=>{var e;return Object.entries(((e=r.value)==null?void 0:e.variables)??{}).map(([a,l])=>{var i;return{key:a,label:a,placeholder:(l.default??((i=l==null?void 0:l.enum)==null?void 0:i[0])??"").toString()}})}),x=b(()=>Object.entries(r.value.variables??{}).reduce((e,[a,l])=>{var i;return e[a]=(l.default??((i=l==null?void 0:l.enum)==null?void 0:i[0])??"").toString(),e},{}));return(e,a)=>(u(),h("div",G,[r.value?(u(),h($,{key:0},[o(y,{data:r.value,onUpdate:c,options:f,title:"Server"},null,8,["data"]),Object.keys(x.value).length?(u(),_(y,{key:0,data:x.value,onUpdate:m,options:n.value,title:"Variables"},null,8,["data","options"])):S("",!0)],64)):S("",!0)]))}}),P={class:"flex-1"},J=V({__name:"Servers",setup(B){const{activeCollection:t,servers:p,serverMutators:v}=g(),{push:f}=R(),d=()=>{if(!t.value)return;const r=A.parse({url:"http://localhost"});v.add(r,t.value.uid),f({name:"servers",params:{server:r.uid}})};return(r,c)=>(u(),_(F,null,{default:s(()=>[o(k(C),{title:"Servers"},{content:s(()=>[E("div",P,[o(L,null,{default:s(()=>{var m;return[(u(!0),h($,null,M((m=k(t))==null?void 0:m.servers,n=>(u(),_(N,{key:n,class:"text-xs",variable:{name:k(p)[n].url??"",uid:n}},null,8,["variable"]))),128))]}),_:1})])]),button:s(()=>[o(j,{click:d},{title:s(()=>c[0]||(c[0]=[w("Add Server")])),_:1})]),_:1}),o(U,{class:"flex-1"},{default:s(()=>[o(H)]),_:1})]),_:1}))}});export{J as default};
