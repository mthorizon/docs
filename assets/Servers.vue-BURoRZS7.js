import{b as V}from"./SidebarButton.vue-C4aXz_BM.js";import{p as j,a as w}from"./SidebarListElement.vue-C_Q6Sz3i.js";import{b as N,x as $,c as O}from"./Sidebar.vue-C9tey-m7.js";import{a as g,d as R,u as U,g as F}from"./index-4GqAGT8-.js";import{w as S}from"./Form.vue-C5ZRrWae.js";import{d as B,c as b,z as u,B as h,$ as C,L as o,an as _,ap as y,av as s,u as k,C as M,at as z,aw as A}from"./APIComponent-BZ0l9kev.js";import"./index-CnIfcF6q.js";import"./DataTableRow.vue-DtzgLgTd.js";import"./DataTableInput.vue-B8DCT_cG.js";const E={class:"w-full"},G=B({__name:"ServerForm",setup(L){const{activeCollection:r,servers:m,serverMutators:v}=g(),f=[{label:"URL",key:"url",placeholder:"https://void.scalar.com/api"},{label:"Label",key:"description",placeholder:"Production"}],d=R(),t=b(()=>{var e,a;return m[r.value&&d.params.server==="default"?(e=r.value)==null?void 0:e.servers[0]:((a=r.value)==null?void 0:a.servers.find(l=>l===d.params.server))??""]}),c=(e,a)=>{r.value&&v.edit(t.value.uid,e,a)},p=(e,a)=>{r.value&&v.edit(t.value.uid,`variables.${e}.value`,a)},i=b(()=>{var e;return Object.entries(((e=t.value)==null?void 0:e.variables)??{}).map(([a,l])=>{var n;return{key:a,label:a,placeholder:(l.default??((n=l==null?void 0:l.enum)==null?void 0:n[0])??"").toString()}})}),x=b(()=>Object.entries(t.value.variables??{}).reduce((e,[a,l])=>{var n;return e[a]=(l.default??((n=l==null?void 0:l.enum)==null?void 0:n[0])??"").toString(),e},{}));return(e,a)=>(u(),h("div",E,[t.value?(u(),h(C,{key:0},[o(S,{data:t.value,onUpdate:c,options:f,title:"Server"},null,8,["data"]),Object.keys(x.value).length?(u(),_(S,{key:0,data:x.value,onUpdate:p,options:i.value,title:"Variables"},null,8,["data","options"])):y("",!0)],64)):y("",!0)]))}}),P={class:"flex-1"},X=B({__name:"Servers",setup(L){const{activeCollection:r,servers:m,serverMutators:v}=g(),{push:f}=U(),d=()=>{if(!r.value)return;const t=F.parse({url:"http://localhost"});v.add(t,r.value.uid),f(`/servers/${t.uid}`)};return(t,c)=>(u(),_(O,null,{default:s(()=>[o(k(N),{title:"Servers"},{content:s(()=>[M("div",P,[o(j,null,{default:s(()=>{var p;return[(u(!0),h(C,null,z((p=k(r))==null?void 0:p.servers,i=>(u(),_(w,{key:i,class:"text-xs",variable:{name:k(m)[i].url??"",uid:i}},null,8,["variable"]))),128))]}),_:1})])]),button:s(()=>[o(V,{click:d},{title:s(()=>c[0]||(c[0]=[A("Add Server")])),_:1})]),_:1}),o($,{class:"flex-1"},{default:s(()=>[o(G)]),_:1})]),_:1}))}});export{X as default};
